{"openapi":"3.1.0","info":{"title":"IIT ML Service","version":"1.0.0"},"paths":{"/health":{"get":{"tags":["health","health"],"summary":"Basic Health Check","description":"Basic health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"503":{"description":"Service Unavailable"}}}},"/health/detailed":{"get":{"tags":["health","health"],"summary":"Detailed Health Check","description":"Comprehensive health check including database and external services","operationId":"detailed_health_check_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"503":{"description":"Service Unavailable"}}}},"/health/ready":{"get":{"tags":["health","health"],"summary":"Readiness Probe","description":"Kubernetes readiness probe - checks if service is ready to serve traffic","operationId":"readiness_check_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"503":{"description":"Service Unavailable"}}}},"/health/live":{"get":{"tags":["health","health"],"summary":"Liveness Probe","description":"Kubernetes liveness probe - checks if service is alive","operationId":"liveness_check_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"503":{"description":"Service Unavailable"}}}},"/health/metrics":{"get":{"tags":["health","health"],"summary":"Application Metrics","description":"Application-specific metrics for monitoring","operationId":"application_metrics_health_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"503":{"description":"Service Unavailable"}}}},"/v1/patients/":{"get":{"tags":["patients","patients"],"summary":"List Patients","description":"List patients with pagination and filtering","operationId":"list_patients_v1_patients__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"General search query","title":"Search"},"description":"General search query"},{"name":"gender","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by gender","title":"Gender"},"description":"Filter by gender"},{"name":"state_province","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by state/province","title":"State Province"},"description":"Filter by state/province"},{"name":"has_phone","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by phone presence","title":"Has Phone"},"description":"Filter by phone presence"},{"name":"age_min","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":120,"minimum":0},{"type":"null"}],"description":"Minimum age","title":"Age Min"},"description":"Minimum age"},{"name":"age_max","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":120,"minimum":0},{"type":"null"}],"description":"Maximum age","title":"Age Max"},"description":"Maximum age"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Created after date","title":"Created After"},"description":"Created after date"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Created before date","title":"Created Before"},"description":"Created before date"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientListResponse"}}}},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unauthorized"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Not Found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unprocessable Content"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Internal Server Error"}}},"post":{"tags":["patients","patients"],"summary":"Create Patient","description":"Create a new patient record in the system.\n\n**Required Information:**\n- Patient identifiers (DATIM ID, PEPFAR ID)\n- Basic demographics (name, birthdate, gender)\n- Location information (state/province, city/village)\n- Contact information (phone number - optional but recommended)\n\n**Data Validation:**\n- Patient UUID is auto-generated if not provided\n- Phone number format validation\n- Required field validation\n- Duplicate checking (based on identifiers)\n\n**Audit Trail:**\n- Creation timestamp and user tracking\n- All changes are logged for compliance\n\n**Use Cases:**\n- New patient registration\n- Data migration from external systems\n- Bulk patient import workflows","operationId":"create_new_patient_v1_patients__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientCreate"}}}},"responses":{"201":{"description":"Patient created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientResponse"},"example":{"patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","datim_id":"DATIM123","pepfar_id":"PEPFAR456","given_name":"John","family_name":"Doe","birthdate":"1985-06-15","gender":"M","state_province":"Lagos","city_village":"Ikeja","phone_number":"+2348012345678","created_at":"2025-01-15T10:30:00","updated_at":"2025-01-15T10:30:00"}}}},"401":{"description":"Authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Not Found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unprocessable Content"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Internal Server Error"},"400":{"description":"Invalid patient data or duplicate patient","content":{"application/json":{"example":{"error":"Validation error","detail":"Patient with DATIM ID DATIM123 already exists","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}}}},"/v1/patients/search":{"get":{"tags":["patients","patients"],"summary":"Search Patients","description":"Advanced patient search with multiple criteria","operationId":"search_patients_v1_patients_search_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"General search query","title":"Query"},"description":"General search query"},{"name":"patient_uuid","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Patient UUID","title":"Patient Uuid"},"description":"Patient UUID"},{"name":"datim_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"DATIM ID","title":"Datim Id"},"description":"DATIM ID"},{"name":"pepfar_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"PEPFAR ID","title":"Pepfar Id"},"description":"PEPFAR ID"},{"name":"given_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Given name","title":"Given Name"},"description":"Given name"},{"name":"family_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Family name","title":"Family Name"},"description":"Family name"},{"name":"gender","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Gender","title":"Gender"},"description":"Gender"},{"name":"state_province","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"State/Province","title":"State Province"},"description":"State/Province"},{"name":"city_village","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"City/Village","title":"City Village"},"description":"City/Village"},{"name":"phone_number","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Phone number","title":"Phone Number"},"description":"Phone number"},{"name":"birthdate_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Birth date from","title":"Birthdate From"},"description":"Birth date from"},{"name":"birthdate_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Birth date to","title":"Birthdate To"},"description":"Birth date to"},{"name":"has_phone","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Has phone number","title":"Has Phone"},"description":"Has phone number"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientListResponse"}}}},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unauthorized"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Not Found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unprocessable Content"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Internal Server Error"}}}},"/v1/patients/{patient_uuid}":{"get":{"tags":["patients","patients"],"summary":"Get Patient By Uuid","description":"Get a specific patient by UUID","operationId":"get_patient_by_uuid_v1_patients__patient_uuid__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","title":"Patient Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientResponse"}}}},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unauthorized"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Not Found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unprocessable Content"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Internal Server Error"}}},"put":{"tags":["patients","patients"],"summary":"Update Existing Patient","description":"Update an existing patient","operationId":"update_existing_patient_v1_patients__patient_uuid__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","title":"Patient Uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientResponse"}}}},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unauthorized"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Not Found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unprocessable Content"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Internal Server Error"}}},"delete":{"tags":["patients","patients"],"summary":"Delete Existing Patient","description":"Delete a patient","operationId":"delete_existing_patient_v1_patients__patient_uuid__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","title":"Patient Uuid"}}],"responses":{"204":{"description":"Successful Response"},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unauthorized"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Not Found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unprocessable Content"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Internal Server Error"}}}},"/v1/patients/import":{"post":{"tags":["patients","patients"],"summary":"Import Patients Bulk","description":"Bulk import patients with optional deduplication and validation","operationId":"import_patients_bulk_v1_patients_import_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientImportRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientImportResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Unprocessable Content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/patients/export":{"get":{"tags":["patients","patients"],"summary":"Export Patients","description":"Export patients data in various formats","operationId":"export_patients_v1_patients_export_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"format","in":"query","required":false,"schema":{"type":"string","description":"Export format: json, csv, excel","default":"json","title":"Format"},"description":"Export format: json, csv, excel"},{"name":"gender","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by gender","title":"Gender"},"description":"Filter by gender"},{"name":"state_province","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by state/province","title":"State Province"},"description":"Filter by state/province"},{"name":"has_phone","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by phone presence","title":"Has Phone"},"description":"Filter by phone presence"},{"name":"age_min","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":120,"minimum":0},{"type":"null"}],"description":"Minimum age","title":"Age Min"},"description":"Minimum age"},{"name":"age_max","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":120,"minimum":0},{"type":"null"}],"description":"Maximum age","title":"Age Max"},"description":"Maximum age"},{"name":"include_related","in":"query","required":false,"schema":{"type":"boolean","description":"Include related data counts","default":false,"title":"Include Related"},"description":"Include related data counts"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"401":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unauthorized"},"403":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Forbidden"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Not Found"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Unprocessable Content"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}},"description":"Internal Server Error"}}}},"/v1/patients/validate":{"post":{"tags":["patients","patients"],"summary":"Validate Patient","description":"Validate patient data and return validation results","operationId":"validate_patient_v1_patients_validate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientValidationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientValidationResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Unprocessable Content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/patients/stats":{"get":{"tags":["patients","patients"],"summary":"Get Patient Statistics","description":"Get patient statistics and analytics","operationId":"get_patient_statistics_v1_patients_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientStatsResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Unprocessable Content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/observations/":{"post":{"tags":["observations","observations"],"summary":"Create Clinical Observation","description":"Create a new clinical observation record for patient data collection.\n\n            **Observation Types:**\n            - Vital signs (blood pressure, temperature, weight)\n            - Laboratory results (CD4 count, viral load, hemoglobin)\n            - Clinical assessments (symptoms, diagnoses, treatment responses)\n            - Medication adherence data\n            - Behavioral observations\n\n            **Data Types Supported:**\n            - Numeric values (measurements, counts, scores)\n            - Text values (notes, descriptions, qualitative data)\n            - Coded values (standardized terminologies, categories)\n\n            **Validation Rules:**\n            - Patient must exist in the system\n            - Encounter must be valid and associated with the patient\n            - Observation UUID auto-generated if not provided\n            - Date/time validation for temporal accuracy\n            - Concept validation for standardized data\n\n            **Audit Trail:**\n            - Creation timestamp automatically recorded\n            - User attribution for accountability\n            - Change history maintained for compliance\n\n            **Use Cases:**\n            - Recording clinical measurements during visits\n            - Capturing laboratory test results\n            - Documenting patient assessments\n            - Tracking treatment progress\n            - Research data collection","operationId":"create_observation_v1_observations__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationCreate"}}}},"responses":{"200":{"description":"Observation created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationResponse"},"example":{"id":456,"obs_uuid":"o1b2c3d4-e5f6-7890-abcd-ef1234567890","patient_uuid":"p1b2c3d4-e5f6-7890-abcd-ef1234567890","encounter_id":123,"concept_id":"5089","variable_name":"CD4_COUNT","value_numeric":450.0,"obs_datetime":"2025-01-15T10:30:00","voided":false,"created_at":"2025-01-15T10:30:00","updated_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Patient or encounter not found","content":{"application/json":{"example":{"error":"Not Found","detail":"Patient not found","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation error in observation data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}}},"get":{"tags":["observations","observations"],"summary":"List observations","description":"List observations with pagination and filtering.\n\nSupports filtering by:\n- patient_uuid: Patient UUID\n- encounter_id: Encounter ID\n- concept_id: Concept identifier\n- variable_name: Variable name\n- obs_datetime_from/to: Date range for observation\n- voided: Whether observation is voided","operationId":"list_observations_v1_observations__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"},{"name":"patient_uuid","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by patient UUID","title":"Patient Uuid"},"description":"Filter by patient UUID"},{"name":"encounter_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by encounter ID","title":"Encounter Id"},"description":"Filter by encounter ID"},{"name":"concept_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by concept ID","title":"Concept Id"},"description":"Filter by concept ID"},{"name":"variable_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by variable name","title":"Variable Name"},"description":"Filter by variable name"},{"name":"obs_datetime_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter observations after this date","title":"Obs Datetime From"},"description":"Filter observations after this date"},{"name":"obs_datetime_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter observations before this date","title":"Obs Datetime To"},"description":"Filter observations before this date"},{"name":"voided","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by voided status","title":"Voided"},"description":"Filter by voided status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/observations/bulk":{"post":{"tags":["observations","observations"],"summary":"Create multiple observations","description":"Create multiple observation records in a single request.\n\n- **observations**: List of observation data (max 1000)","operationId":"create_bulk_observations_v1_observations_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkObservationCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkObservationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/observations/{observation_id}":{"get":{"tags":["observations","observations"],"summary":"Get observation by ID","description":"Get a specific observation by its database ID.\n\n- **observation_id**: Observation database ID","operationId":"get_observation_v1_observations__observation_id__get","parameters":[{"name":"observation_id","in":"path","required":true,"schema":{"type":"integer","title":"Observation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["observations","observations"],"summary":"Update observation","description":"Update an existing observation record.\n\n- **observation_id**: Observation database ID\n- **observation_update**: Fields to update","operationId":"update_observation_v1_observations__observation_id__put","parameters":[{"name":"observation_id","in":"path","required":true,"schema":{"type":"integer","title":"Observation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["observations","observations"],"summary":"Delete observation","description":"Soft delete an observation record (mark as voided).\n\n- **observation_id**: Observation database ID","operationId":"delete_observation_v1_observations__observation_id__delete","parameters":[{"name":"observation_id","in":"path","required":true,"schema":{"type":"integer","title":"Observation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/observations/uuid/{obs_uuid}":{"get":{"tags":["observations","observations"],"summary":"Get observation by UUID","description":"Get a specific observation by its UUID.\n\n- **obs_uuid**: Observation UUID","operationId":"get_observation_by_uuid_v1_observations_uuid__obs_uuid__get","parameters":[{"name":"obs_uuid","in":"path","required":true,"schema":{"type":"string","title":"Obs Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/observations/patient/{patient_uuid}":{"get":{"tags":["observations","observations"],"summary":"Get observations for patient","description":"Get all observations for a specific patient.\n\n- **patient_uuid**: Patient UUID\n- **page**: Page number for pagination\n- **page_size**: Number of items per page\n- **voided**: Filter by voided status (optional)","operationId":"get_patient_observations_v1_observations_patient__patient_uuid__get","parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","title":"Patient Uuid"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"},{"name":"voided","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by voided status","title":"Voided"},"description":"Filter by voided status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/observations/encounter/{encounter_id}":{"get":{"tags":["observations","observations"],"summary":"Get observations for encounter","description":"Get all observations for a specific encounter.\n\n- **encounter_id**: Encounter database ID\n- **page**: Page number for pagination\n- **page_size**: Number of items per page\n- **voided**: Filter by voided status (optional)","operationId":"get_encounter_observations_v1_observations_encounter__encounter_id__get","parameters":[{"name":"encounter_id","in":"path","required":true,"schema":{"type":"integer","title":"Encounter Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"},{"name":"voided","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by voided status","title":"Voided"},"description":"Filter by voided status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObservationListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/visits/":{"post":{"tags":["visits","visits"],"summary":"Create Patient Visit","description":"Create a new patient visit record in the clinical system.\n\n            **Visit Types:**\n            - Initial consultation visits\n            - Follow-up visits\n            - Treatment visits\n            - Laboratory visits\n            - Pharmacy visits\n\n            **Data Validation:**\n            - Patient must exist in the system\n            - Visit UUID auto-generated if not provided\n            - Date validation (start date required, end date optional)\n            - Location/facility validation if provided\n\n            **Audit Trail:**\n            - Creation timestamp automatically set\n            - User tracking for compliance\n            - Visit history maintained\n\n            **Use Cases:**\n            - Recording patient encounters\n            - Tracking visit sequences\n            - Appointment management\n            - Clinical workflow management","operationId":"create_visit_v1_visits__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitCreate"}}}},"responses":{"200":{"description":"Visit created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitResponse"},"example":{"id":123,"visit_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","patient_uuid":"p1b2c3d4-e5f6-7890-abcd-ef1234567890","visit_type":"Follow-up","date_started":"2025-01-15T10:30:00","date_stopped":"2025-01-15T11:15:00","location_id":"facility-001","voided":false,"created_at":"2025-01-15T10:30:00","updated_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Patient not found","content":{"application/json":{"example":{"error":"Not Found","detail":"Patient not found","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}}},"get":{"tags":["visits","visits"],"summary":"List visits","description":"List visits with pagination and filtering.\n\nSupports filtering by:\n- patient_uuid: Patient UUID\n- visit_type: Type of visit\n- location_id: Location/facility identifier\n- date_started_from/to: Date range for visit start\n- voided: Whether visit is voided","operationId":"list_visits_v1_visits__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"},{"name":"patient_uuid","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by patient UUID","title":"Patient Uuid"},"description":"Filter by patient UUID"},{"name":"visit_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by visit type","title":"Visit Type"},"description":"Filter by visit type"},{"name":"location_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by location ID","title":"Location Id"},"description":"Filter by location ID"},{"name":"date_started_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter visits started after this date","title":"Date Started From"},"description":"Filter visits started after this date"},{"name":"date_started_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter visits started before this date","title":"Date Started To"},"description":"Filter visits started before this date"},{"name":"voided","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by voided status","title":"Voided"},"description":"Filter by voided status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/visits/{visit_id}":{"get":{"tags":["visits","visits"],"summary":"Get visit by ID","description":"Get a specific visit by its database ID.\n\n- **visit_id**: Visit database ID","operationId":"get_visit_v1_visits__visit_id__get","parameters":[{"name":"visit_id","in":"path","required":true,"schema":{"type":"integer","title":"Visit Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["visits","visits"],"summary":"Update visit","description":"Update an existing visit record.\n\n- **visit_id**: Visit database ID\n- **visit_update**: Fields to update","operationId":"update_visit_v1_visits__visit_id__put","parameters":[{"name":"visit_id","in":"path","required":true,"schema":{"type":"integer","title":"Visit Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["visits","visits"],"summary":"Delete visit","description":"Soft delete a visit record (mark as voided).\n\n- **visit_id**: Visit database ID","operationId":"delete_visit_v1_visits__visit_id__delete","parameters":[{"name":"visit_id","in":"path","required":true,"schema":{"type":"integer","title":"Visit Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/visits/uuid/{visit_uuid}":{"get":{"tags":["visits","visits"],"summary":"Get Visit by UUID","description":"Retrieve a specific patient visit record by its universally unique identifier (UUID).\n\n            **UUID Benefits:**\n            - Globally unique across systems and databases\n            - Stable identifier that doesn't change with database migrations\n            - Suitable for external integrations and data sharing\n            - Consistent across different environments (dev, staging, production)\n\n            **Visit Information Retrieved:**\n            - Complete visit details including dates, type, and location\n            - Associated patient information via patient_uuid\n            - Visit status and voided state\n            - Full audit trail with creation and update timestamps\n\n            **Use Cases:**\n            - External system integrations requiring stable identifiers\n            - Mobile applications and offline-capable systems\n            - Data synchronization across multiple healthcare platforms\n            - Research and analytics requiring consistent visit references","operationId":"get_visit_by_uuid_v1_visits_uuid__visit_uuid__get","parameters":[{"name":"visit_uuid","in":"path","required":true,"schema":{"type":"string","title":"Visit Uuid"}}],"responses":{"200":{"description":"Visit retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitResponse"},"example":{"id":123,"visit_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","patient_uuid":"p1b2c3d4-e5f6-7890-abcd-ef1234567890","visit_type":"Follow-up","date_started":"2025-01-15T10:30:00","date_stopped":"2025-01-15T11:15:00","location_id":"facility-001","voided":false,"created_at":"2025-01-15T10:30:00","updated_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Visit not found","content":{"application/json":{"example":{"error":"Not Found","detail":"Visit not found","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/visits/patient/{patient_uuid}":{"get":{"tags":["visits","visits"],"summary":"Get visits for patient","description":"Get all visits for a specific patient.\n\n- **patient_uuid**: Patient UUID\n- **page**: Page number for pagination\n- **page_size**: Number of items per page\n- **voided**: Filter by voided status (optional)","operationId":"get_patient_visits_v1_visits_patient__patient_uuid__get","parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","title":"Patient Uuid"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"},{"name":"voided","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by voided status","title":"Voided"},"description":"Filter by voided status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/predictions/":{"post":{"tags":["predictions","Predictions"],"summary":"Create IIT Risk Prediction","description":"Generate a new IIT (Interruption in Treatment) risk prediction for a patient using machine learning models.\n\n            **Prediction Process:**\n            1. **Patient Validation**: Verify patient exists in the system\n            2. **Feature Extraction**: Extract relevant clinical and demographic features\n            3. **Model Inference**: Run prediction using trained ML model\n            4. **Risk Assessment**: Calculate risk score and determine risk level\n            5. **Audit Trail**: Record prediction with full traceability\n\n            **Risk Levels:**\n            - **Low (0.0 - 0.3)**: Routine monitoring recommended\n            - **Medium (0.3 - 0.5)**: Increased monitoring and preventive measures\n            - **High (0.5 - 0.75)**: Immediate intervention required\n            - **Critical (0.75+)**: Urgent clinical attention needed\n\n            **Features Used:**\n            - Patient demographics (age, gender, location)\n            - Clinical measurements (CD4 count, viral load)\n            - Treatment history (days since last refill, medication adherence)\n            - Visit patterns (frequency, regularity)\n            - Laboratory results (recent test values)\n\n            **Audit Trail:**\n            - Prediction timestamp and user tracking\n            - Model version used for reproducibility\n            - Feature values used in calculation\n            - Confidence score for prediction reliability\n\n            **Use Cases:**\n            - Clinical decision support for treatment planning\n            - Risk stratification for resource allocation\n            - Patient monitoring and follow-up scheduling\n            - Research and epidemiological studies","operationId":"create_prediction_v1_predictions__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionCreate"}}}},"responses":{"201":{"description":"Prediction created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionResponse"},"example":{"id":123,"patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","risk_score":0.68,"risk_level":"high","confidence":0.85,"features_used":{"age":35,"days_since_last_refill":45,"last_days_supply":30,"visit_count_last_90d":2,"cd4_count":380},"model_version":"1.2.0","prediction_timestamp":"2025-01-15T10:30:00","created_by":"clinician-001","created_at":"2025-01-15T10:30:00","updated_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Patient not found","content":{"application/json":{"example":{"error":"Not Found","detail":"Patient not found","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation error in prediction data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal server error during prediction","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}}},"get":{"tags":["predictions","Predictions"],"summary":"List Predictions","description":"List predictions with optional filtering","operationId":"list_predictions_v1_predictions__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"patient_uuid","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Patient Uuid"}},{"name":"risk_level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Risk Level"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/predictions/{prediction_id}":{"get":{"tags":["predictions","Predictions"],"summary":"Get Prediction","description":"Get a specific prediction by ID","operationId":"get_prediction_v1_predictions__prediction_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"prediction_id","in":"path","required":true,"schema":{"type":"integer","title":"Prediction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["predictions","Predictions"],"summary":"Delete Prediction","description":"Delete a prediction record","operationId":"delete_prediction_v1_predictions__prediction_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"prediction_id","in":"path","required":true,"schema":{"type":"integer","title":"Prediction Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/predictions/batch":{"post":{"tags":["predictions","Predictions"],"summary":"Batch Predictions","description":"Create batch predictions for multiple patients","operationId":"batch_predictions_v1_predictions_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchPredictionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchPredictionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/predictions/analytics/overview":{"get":{"tags":["predictions","Predictions"],"summary":"Get Prediction Analytics","description":"Get prediction analytics overview","operationId":"get_prediction_analytics_v1_predictions_analytics_overview_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionAnalyticsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register New User Account","description":"Create a new user account in the IIT ML Service system.\n\n            **Account Requirements:**\n            - Username: 3-50 characters, alphanumeric and underscores only\n            - Email: Valid email address format, must be unique\n            - Password: Minimum 8 characters, must contain:\n              - At least one uppercase letter (A-Z)\n              - At least one lowercase letter (a-z)\n              - At least one digit (0-9)\n              - Special characters recommended for security\n            - Full Name: Optional, for display purposes\n\n            **Security Features:**\n            - Passwords are hashed using bcrypt before storage\n            - Duplicate username/email validation prevents conflicts\n            - Automatic account activation for new registrations\n            - Default role assignment ('analyst') for basic access\n\n            **Permissions:**\n            - Default 'analyst' role provides basic ML service access\n            - Can view patient data, run predictions, access analytics\n            - Cannot modify system settings or manage other users\n            - Superuser privileges required for administrative functions\n\n            **Audit Trail:**\n            - Registration timestamp automatically recorded\n            - Account creation logged for compliance\n            - Initial role assignment tracked\n\n            **Use Cases:**\n            - New analyst onboarding\n            - Researcher account creation\n            - Healthcare worker registration\n            - System administrator setup","operationId":"register_user_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"User account created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"},"example":{"id":123,"username":"johndoe","email":"john.doe@example.com","full_name":"John Doe","is_active":true,"is_superuser":false,"created_at":"2025-01-15T10:30:00","updated_at":"2025-01-15T10:30:00","roles":[{"id":2,"name":"analyst","description":"Basic ML service access"}]}}}},"400":{"description":"Validation error or duplicate account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"},"example":{"error":"Bad Request","detail":"Username already registered","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"}}}},"422":{"description":"Input validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}}}}},"/v1/auth/test-login/{username}":{"get":{"tags":["auth"],"summary":"Test Login Endpoint","description":"Test endpoint to verify database access works through HTTP\nBypasses token creation and complex authentication flow","operationId":"test_login_endpoint_v1_auth_test_login__username__get","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login For Access Token","description":"Authenticate user and return access/refresh tokens.\n\n**Enhanced Security**: Tokens are set as httpOnly cookies to prevent\nXSS attacks. Tokens are also returned in response body for backward\ncompatibility with existing clients.\n\n- **username**: Username or email\n- **password**: User password","operationId":"login_for_access_token_v1_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_v1_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/refresh":{"post":{"tags":["auth"],"summary":"Refresh Access Token","description":"Refresh access token using refresh token.\n\nSupports both request body and httpOnly cookie for backward compatibility.\n\n- **refresh_token**: Valid refresh token (optional if using cookie)","operationId":"refresh_access_token_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/logout":{"post":{"tags":["auth"],"summary":"Logout","description":"Logout user by clearing authentication cookies.\n\nThis endpoint clears the httpOnly cookies containing the JWT tokens.\nFor additional security, tokens can be added to a blacklist in production.","operationId":"logout_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/auth/me":{"get":{"tags":["auth"],"summary":"Get Current User Info","description":"Get current authenticated user information\n\nRequires valid access token","operationId":"get_current_user_info_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/auth/setup-defaults":{"post":{"tags":["auth"],"summary":"Setup Default Roles And Permissions","description":"Create default roles and permissions\n\nRequires superuser privileges","operationId":"setup_default_roles_and_permissions_v1_auth_setup_defaults_post","responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/auth/roles":{"get":{"tags":["auth"],"summary":"Get Roles","description":"Get list of roles\n\nRequires authentication","operationId":"get_roles_v1_auth_roles_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"},"title":"Response Get Roles V1 Auth Roles Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/features/{patient_uuid}":{"get":{"tags":["features","features"],"summary":"Get Patient Features","description":"Retrieve IIT (Isoniazid Preventive Therapy) features for a specific patient.\n\n            **Feature Types:**\n            - Demographic features (age, gender, location)\n            - Clinical features (treatment history, lab results)\n            - Behavioral features (adherence patterns, contact info)\n            - Risk assessment features (calculated risk scores)\n\n            **Data Sources:**\n            - Patient demographics and registration data\n            - Clinical visits and encounter records\n            - Laboratory observations and test results\n            - Medication dispensing and adherence data\n\n            **Caching:**\n            - Features are cached for performance\n            - Cache invalidation occurs on data updates\n            - Background recomputation available for large datasets\n\n            **Use Cases:**\n            - ML model prediction input\n            - Risk stratification and patient monitoring\n            - Clinical decision support systems\n            - Research and analytics queries","operationId":"get_patient_features_v1_features__patient_uuid__get","parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Uuid"}}],"responses":{"200":{"description":"Patient features retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IITFeaturesResponse"},"example":{"patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","age":35,"gender":"M","has_phone":true,"days_since_last_visit":45,"days_since_last_refill":30,"total_visits":12,"viral_load_suppressed":true,"cd4_count":450,"last_feature_update":"2025-01-15T10:30:00","feature_version":"1.0"}}}},"404":{"description":"Patient or features not found","content":{"application/json":{"example":{"error":"Not Found","detail":"Features not found for this patient","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["features","features"],"summary":"Update Patient Features","description":"Update IIT features for a specific patient\n\n- **patient_uuid**: Patient's unique identifier\n- **feature_update**: Feature values to update","operationId":"update_patient_features_v1_features__patient_uuid__put","parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IITFeaturesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["features","features"],"summary":"Delete Patient Features","description":"Delete IIT features for a specific patient\n\n- **patient_uuid**: Patient's unique identifier","operationId":"delete_patient_features_v1_features__patient_uuid__delete","parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Uuid"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/features/{patient_uuid}/compute":{"post":{"tags":["features","features"],"summary":"Compute Core IIT Features","description":"Compute core IIT (Isoniazid Preventive Therapy) features for a patient.\n\n            **Core Features Computed:**\n            - Age (calculated from birthdate)\n            - Gender\n            - Phone availability\n            - Days since last visit\n            - Days since last refill\n            - Total visits count\n\n            **Data Sources:**\n            - Patient demographics\n            - Visit records\n            - Medication dispensing records\n\n            **Use Cases:**\n            - Basic risk assessment\n            - Patient monitoring\n            - Clinical decision support","operationId":"compute_patient_features_v1_features__patient_uuid__compute_post","parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Patient Uuid"}},{"name":"force_recompute","in":"query","required":false,"schema":{"type":"boolean","description":"Force recomputation even if features exist","default":false,"title":"Force Recompute"},"description":"Force recomputation even if features exist"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IITFeaturesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/features/":{"get":{"tags":["features","features"],"summary":"Get Features Summary","description":"Get summary statistics of IIT features across all patients\n\n- **skip**: Number of records to skip\n- **limit**: Number of records to return","operationId":"get_features_summary_v1_features__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of records to skip","default":0,"title":"Skip"},"description":"Number of records to skip"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Number of records to return","default":100,"title":"Limit"},"description":"Number of records to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Features Summary V1 Features  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/risk-distribution":{"get":{"tags":["analytics","Analytics"],"summary":"Get Risk Distribution","description":"Get distribution of risk levels across predictions","operationId":"get_risk_distribution_v1_analytics_risk_distribution_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start date for analysis","title":"Start Date"},"description":"Start date for analysis"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End date for analysis","title":"End Date"},"description":"End date for analysis"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Risk Distribution V1 Analytics Risk Distribution Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/trends":{"get":{"tags":["analytics","Analytics"],"summary":"Get Trends","description":"Get trends for specified metric over time period","operationId":"get_trends_v1_analytics_trends_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"metric","in":"query","required":true,"schema":{"type":"string","description":"Metric to analyze (iit_risk, prediction_count, patient_count)","title":"Metric"},"description":"Metric to analyze (iit_risk, prediction_count, patient_count)"},{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period (1d, 7d, 30d, 90d)","default":"30d","title":"Period"},"description":"Time period (1d, 7d, 30d, 90d)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Trends V1 Analytics Trends Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/cohort-analysis":{"get":{"tags":["analytics","Analytics"],"summary":"Get Cohort Analysis","description":"Cohort analysis - analyze patient groups by demographics","operationId":"get_cohort_analysis_v1_analytics_cohort_analysis_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"age_group","in":"query","required":true,"schema":{"type":"string","description":"Age group (18-25, 26-35, 36-50, 50+)","title":"Age Group"},"description":"Age group (18-25, 26-35, 36-50, 50+)"},{"name":"gender","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by gender (M, F)","title":"Gender"},"description":"Filter by gender (M, F)"},{"name":"state_province","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by state","title":"State Province"},"description":"Filter by state"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start date","title":"Start Date"},"description":"Start date"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End date","title":"End Date"},"description":"End date"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Cohort Analysis V1 Analytics Cohort Analysis Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/risk-factors":{"get":{"tags":["analytics","Analytics"],"summary":"Get Risk Factors","description":"Analyze risk factors for a specific patient","operationId":"get_risk_factors_v1_analytics_risk_factors_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"patient_uuid","in":"query","required":true,"schema":{"type":"string","description":"Patient UUID to analyze","title":"Patient Uuid"},"description":"Patient UUID to analyze"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Risk Factors V1 Analytics Risk Factors Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/export/csv":{"get":{"tags":["analytics","Analytics"],"summary":"Export Data Csv","description":"Export data as CSV file","operationId":"export_data_csv_v1_analytics_export_csv_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"data_type","in":"query","required":true,"schema":{"type":"string","description":"Data type (patients, predictions, observations)","title":"Data Type"},"description":"Data type (patients, predictions, observations)"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start date","title":"Start Date"},"description":"Start date"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End date","title":"End Date"},"description":"End date"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Export Data Csv V1 Analytics Export Csv Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/summary":{"get":{"tags":["analytics","Analytics"],"summary":"Get Summary","description":"Get overall system summary statistics","operationId":"get_summary_v1_analytics_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Summary V1 Analytics Summary Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/analytics/model-performance":{"get":{"tags":["analytics","Analytics"],"summary":"Get Model Performance","description":"Get ML model performance metrics","operationId":"get_model_performance_v1_analytics_model_performance_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Model Performance V1 Analytics Model Performance Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/explainability/feature-importance/{model_version}":{"get":{"tags":["explainability","Explainability"],"summary":"Get Feature Importance Scores","description":"Retrieve feature importance scores for a specific machine learning model version.\n\n            **Feature Importance Analysis:**\n            - Quantifies the contribution of each feature to model predictions\n            - Helps identify key predictors of IIT risk\n            - Supports model interpretability and validation\n            - Enables feature selection and engineering decisions\n\n            **Importance Calculation Methods:**\n            - Tree-based models: Gini importance, permutation importance\n            - Linear models: Coefficient magnitudes\n            - Neural networks: Gradient-based attribution methods\n            - Ensemble methods: Weighted average of base model importances\n\n            **Clinical Applications:**\n            - Identify most influential clinical indicators\n            - Guide feature engineering and data collection priorities\n            - Support clinical decision-making transparency\n            - Validate model alignment with clinical expertise\n\n            **Performance Considerations:**\n            - Importance scores cached for performance\n            - Recalculation available for updated models\n            - Sample-based estimation for large datasets\n            - Historical tracking of importance changes\n\n            **Use Cases:**\n            - Model validation and interpretability assessment\n            - Feature selection for model updates\n            - Clinical research and analysis\n            - Regulatory compliance documentation","operationId":"get_feature_importance_v1_explainability_feature_importance__model_version__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"model_version","in":"path","required":true,"schema":{"type":"string","title":"Model Version"}}],"responses":{"200":{"description":"Feature importance scores retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FeatureImportanceResponse"},"title":"Response 200 Get Feature Importance V1 Explainability Feature Importance  Model Version  Get"},"example":[{"model_version":"1.2.0","feature_name":"days_since_last_refill","importance_score":0.35,"calculated_at":"2025-01-15T10:30:00"},{"model_version":"1.2.0","feature_name":"cd4_count","importance_score":0.28,"calculated_at":"2025-01-15T10:30:00"}]}}},"404":{"description":"Model version not found or no importance scores calculated","content":{"application/json":{"example":{"error":"Not Found","detail":"No feature importance found for model version 1.2.0","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal server error during importance calculation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/explainability/predictions/explain":{"post":{"tags":["explainability","Explainability"],"summary":"Generate Prediction Explanation","description":"Generate a comprehensive explanation for a specific IIT risk prediction.\n\n            **Explanation Generation Process:**\n            1. **Prediction Retrieval**: Locate the prediction record and associated data\n            2. **Feature Attribution**: Calculate contribution of each feature to the prediction\n            3. **Factor Analysis**: Identify top positive and negative risk factors\n            4. **Summary Generation**: Create human-readable explanation summary\n            5. **Confidence Assessment**: Evaluate explanation reliability\n\n            **Explanation Components:**\n            - **Feature Contributions**: How each input feature influenced the prediction\n            - **Top Positive Factors**: Features that increased IIT risk assessment\n            - **Top Negative Factors**: Features that decreased IIT risk assessment\n            - **Summary**: Natural language explanation of the prediction reasoning\n            - **Confidence Score**: Reliability measure of the explanation\n\n            **Attribution Methods:**\n            - SHAP (SHapley Additive exPlanations) values\n            - LIME (Local Interpretable Model-agnostic Explanations)\n            - Feature permutation importance\n            - Partial dependence plots data\n\n            **Clinical Applications:**\n            - Explain risk predictions to healthcare providers\n            - Support clinical decision-making with evidence\n            - Identify key factors for patient intervention planning\n            - Build trust in ML-based clinical tools\n\n            **Performance Considerations:**\n            - Explanations cached for frequently requested predictions\n            - On-demand calculation for new or updated predictions\n            - Asynchronous processing for complex explanations\n            - Resource optimization for high-volume requests\n\n            **Use Cases:**\n            - Clinical decision support during patient consultations\n            - Quality assurance and model validation\n            - Research analysis of prediction patterns\n            - Regulatory compliance and audit trails","operationId":"explain_prediction_v1_explainability_predictions_explain_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionExplanationRequest"}}},"required":true},"responses":{"200":{"description":"Prediction explanation generated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionExplanationResponse"},"example":{"prediction_id":"pred_12345","patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","risk_score":0.68,"risk_level":"high","model_version":"1.2.0","feature_contributions":[{"feature":"days_since_last_refill","contribution":0.25,"value":45},{"feature":"cd4_count","contribution":0.18,"value":380},{"feature":"viral_load_suppressed","contribution":-0.12,"value":true}],"top_positive_factors":[{"factor":"Long time since last medication refill","impact":"high"},{"factor":"Low CD4 count","impact":"medium"}],"top_negative_factors":[{"factor":"Viral load suppressed","impact":"medium"}],"explanation_summary":"High IIT risk due to extended period without medication refill and low CD4 count, despite viral suppression.","confidence_score":0.85,"created_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Prediction not found or explanation generation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"},"example":{"error":"Not Found","detail":"Prediction pred_12345 not found","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"}}}},"500":{"description":"Internal server error during explanation generation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/explainability/predictions/{prediction_id}/explanation":{"get":{"tags":["explainability","Explainability"],"summary":"Get Stored Prediction Explanation","description":"Retrieve a previously generated explanation for a specific IIT risk prediction.\n\n            **Explanation Retrieval:**\n            - Access cached or stored prediction explanations\n            - Retrieve detailed attribution information\n            - Get human-readable explanation summaries\n            - Access confidence scores and reliability metrics\n\n            **Explanation Components:**\n            - **Feature Contributions**: Detailed breakdown of each feature's influence\n            - **Risk Factors**: Top positive and negative factors affecting prediction\n            - **Summary**: Natural language explanation of model reasoning\n            - **Metadata**: Model version, confidence score, generation timestamp\n\n            **Performance Benefits:**\n            - Instant retrieval of pre-computed explanations\n            - Reduced computational overhead for repeated requests\n            - Consistent explanations across multiple accesses\n            - Historical tracking of explanation changes\n\n            **Use Cases:**\n            - Review explanations during clinical consultations\n            - Audit and quality assurance of predictions\n            - Research analysis of explanation patterns\n            - Training and education for healthcare providers\n            - Documentation for regulatory compliance\n\n            **Caching Strategy:**\n            - Explanations stored in database for persistence\n            - Automatic cleanup of outdated explanations\n            - Version tracking for model updates\n            - Optimized retrieval for high-frequency access","operationId":"get_prediction_explanation_v1_explainability_predictions__prediction_id__explanation_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"prediction_id","in":"path","required":true,"schema":{"type":"string","title":"Prediction Id"}}],"responses":{"200":{"description":"Prediction explanation retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionExplanationResponse"},"example":{"prediction_id":"pred_12345","patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","risk_score":0.68,"risk_level":"high","model_version":"1.2.0","feature_contributions":[{"feature":"days_since_last_refill","contribution":0.25,"value":45},{"feature":"cd4_count","contribution":0.18,"value":380}],"top_positive_factors":[{"factor":"Long time since last medication refill","impact":"high"}],"top_negative_factors":[{"factor":"Recent clinic visit","impact":"low"}],"explanation_summary":"High IIT risk primarily due to extended period without medication refill.","confidence_score":0.85,"created_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Prediction explanation not found","content":{"application/json":{"example":{"error":"Not Found","detail":"Prediction explanation not found for pred_12345","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal server error during explanation retrieval","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/explainability/models/{model_version}/interpretability-report":{"post":{"tags":["explainability","Explainability"],"summary":"Generate Model Interpretability Report","description":"Generate a comprehensive interpretability report for a machine learning model version.\n\n            **Report Generation Process:**\n            1. **Feature Importance Analysis**: Calculate global feature importance scores\n            2. **Explanation Pattern Mining**: Identify common explanation patterns\n            3. **Interpretability Metrics**: Compute model transparency and explainability metrics\n            4. **Model Behavior Analysis**: Analyze prediction patterns and decision boundaries\n            5. **Report Compilation**: Structure findings into comprehensive report\n\n            **Report Components:**\n            - **Feature Importance**: Global importance scores across all predictions\n            - **Explanation Patterns**: Common factors influencing predictions\n            - **Interpretability Metrics**: Quantitative measures of model explainability\n            - **Model Insights**: Key findings about model behavior and limitations\n\n            **Analysis Methods:**\n            - Global feature importance using permutation methods\n            - Pattern mining across prediction explanations\n            - Interpretability scoring using established metrics\n            - Statistical analysis of prediction distributions\n\n            **Clinical Applications:**\n            - Assess overall model reliability and transparency\n            - Identify systematic patterns in IIT risk predictions\n            - Guide model improvement and feature engineering\n            - Support regulatory compliance and validation\n\n            **Performance Considerations:**\n            - Report generation may take several minutes for complex models\n            - Results cached for subsequent access\n            - Asynchronous processing for large-scale analysis\n            - Resource optimization for production deployment\n\n            **Use Cases:**\n            - Model validation and regulatory compliance\n            - Research analysis of prediction patterns\n            - Quality assurance and model monitoring\n            - Clinical decision support system evaluation\n            - Documentation for healthcare accreditation","operationId":"get_interpretability_report_v1_explainability_models__model_version__interpretability_report_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"model_version","in":"path","required":true,"schema":{"type":"string","title":"Model Version"}}],"responses":{"200":{"description":"Interpretability report generated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InterpretabilityReportResponse"},"example":{"model_version":"1.2.0","feature_importance":{"days_since_last_refill":0.35,"cd4_count":0.28,"viral_load_suppressed":0.15,"age":0.12,"gender":0.1},"explanation_patterns":{"high_risk_patterns":["Extended time without medication refill","Low CD4 count combined with high viral load"],"low_risk_patterns":["Consistent medication adherence","Suppressed viral load with regular monitoring"]},"interpretability_metrics":{"feature_stability":0.85,"explanation_consistency":0.78,"prediction_transparency":0.92},"generated_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Model version not found or insufficient data for analysis","content":{"application/json":{"example":{"error":"Not Found","detail":"Model version 1.2.0 not found or insufficient prediction data","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal server error during report generation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/explainability/predictions/explanations":{"get":{"tags":["explainability","Explainability"],"summary":"List Prediction Explanations","description":"Retrieve a paginated list of prediction explanations with optional filtering.\n\n            **Filtering Options:**\n            - **Model Version**: Filter explanations by specific model version\n            - **Patient UUID**: Filter explanations for a specific patient\n            - **Pagination**: Control result set size and offset for large datasets\n\n            **Sorting:**\n            - Results ordered by creation date (newest first)\n            - Chronological access to recent explanations\n            - Historical tracking of explanation evolution\n\n            **Performance Optimization:**\n            - Database indexing on commonly filtered fields\n            - Efficient pagination for large result sets\n            - Cached queries for frequently accessed data\n            - Memory-efficient streaming for bulk exports\n\n            **Clinical Applications:**\n            - Review multiple patient explanations in batch\n            - Analyze explanation patterns across patient populations\n            - Quality assurance and consistency checking\n            - Research studies on explanation effectiveness\n\n            **Use Cases:**\n            - Batch analysis of prediction explanations\n            - Clinical audit and quality improvement\n            - Research data extraction and analysis\n            - System monitoring and performance evaluation\n            - Training dataset creation for ML improvement","operationId":"list_prediction_explanations_v1_explainability_predictions_explanations_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"model_version","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by model version","title":"Model Version"},"description":"Filter by model version"},{"name":"patient_uuid","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by patient UUID","title":"Patient Uuid"},"description":"Filter by patient UUID"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of results","default":50,"title":"Limit"},"description":"Maximum number of results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of results to skip","default":0,"title":"Offset"},"description":"Number of results to skip"}],"responses":{"200":{"description":"Prediction explanations retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PredictionExplanationResponse"},"title":"Response 200 List Prediction Explanations V1 Explainability Predictions Explanations Get"},"example":[{"prediction_id":"pred_12345","patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","risk_score":0.68,"risk_level":"high","model_version":"1.2.0","feature_contributions":[{"feature":"days_since_last_refill","contribution":0.25,"value":45}],"top_positive_factors":[{"factor":"Long time since last medication refill","impact":"high"}],"top_negative_factors":[{"factor":"Recent clinic visit","impact":"low"}],"explanation_summary":"High IIT risk due to extended period without medication refill.","confidence_score":0.85,"created_at":"2025-01-15T10:30:00"}]}}},"500":{"description":"Internal server error during explanation retrieval","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/explainability/models/{model_version}/bias-analysis":{"get":{"tags":["explainability","Explainability"],"summary":"Analyze Model Bias","description":"Perform bias analysis on a machine learning model to detect potential fairness issues and systematic errors.\n\n            **Bias Analysis Process:**\n            1. **Data Collection**: Gather recent predictions for analysis\n            2. **Distribution Analysis**: Examine risk level distributions\n            3. **Pattern Detection**: Identify potential bias indicators\n            4. **Threshold Evaluation**: Check for disproportionate risk assignments\n            5. **Report Generation**: Compile findings and recommendations\n\n            **Bias Detection Methods:**\n            - Risk distribution analysis across predictions\n            - Threshold-based bias indicators\n            - Statistical significance testing\n            - Comparative analysis with baseline expectations\n\n            **Bias Types Detected:**\n            - **Over-prediction Bias**: Systematic overestimation of risk levels\n            - **Under-prediction Bias**: Systematic underestimation of risk levels\n            - **Distribution Bias**: Unbalanced risk level distributions\n            - **Threshold Bias**: Inappropriate risk classification boundaries\n\n            **Clinical Implications:**\n            - Ensure equitable risk assessment across patient populations\n            - Identify potential discrimination in clinical decision support\n            - Support fairness in healthcare delivery\n            - Guide bias mitigation strategies\n\n            **Regulatory Compliance:**\n            - Support algorithmic fairness requirements\n            - Document bias assessment procedures\n            - Enable audit trails for fairness evaluations\n            - Meet healthcare equity standards\n\n            **Use Cases:**\n            - Model validation and fairness assessment\n            - Regulatory compliance documentation\n            - Quality assurance and monitoring\n            - Research on healthcare equity\n            - Clinical governance and oversight","operationId":"get_bias_analysis_v1_explainability_models__model_version__bias_analysis_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"model_version","in":"path","required":true,"schema":{"type":"string","title":"Model Version"}}],"responses":{"200":{"description":"Bias analysis completed successfully","content":{"application/json":{"schema":{},"example":{"risk_distribution":{"Low":250,"Medium":400,"High":350},"total_analyzed":1000,"potential_bias_concerns":["High risk predictions slightly elevated"]}}}},"404":{"description":"Model version not found or insufficient prediction data","content":{"application/json":{"example":{"error":"Not Found","detail":"No predictions found for bias analysis of model version 1.2.0","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal server error during bias analysis","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/explainability/models/{model_version}/recalculate-importance":{"post":{"tags":["explainability","Explainability"],"summary":"Recalculate Feature Importance","description":"Trigger recalculation of feature importance scores for a machine learning model with configurable sample size.\n\n            **Recalculation Process:**\n            1. **Sample Selection**: Randomly select prediction samples for analysis\n            2. **Importance Calculation**: Compute feature importance using configured methods\n            3. **Database Update**: Store new importance scores with timestamps\n            4. **Cache Invalidation**: Clear cached importance data for freshness\n            5. **Result Compilation**: Return calculation statistics and metadata\n\n            **Importance Methods:**\n            - Permutation importance for global feature effects\n            - Tree-based importance for ensemble models\n            - SHAP value aggregation for comprehensive attribution\n            - Statistical significance testing for reliability\n\n            **Sample Size Considerations:**\n            - **Small Samples (100-500)**: Fast calculation, lower accuracy\n            - **Medium Samples (500-2000)**: Balanced performance and accuracy\n            - **Large Samples (2000+)**: High accuracy, increased computation time\n            - **Full Dataset**: Maximum accuracy, longest processing time\n\n            **Performance Optimization:**\n            - Parallel processing for large sample sizes\n            - Incremental updates for existing importance scores\n            - Memory-efficient algorithms for big datasets\n            - Background processing for very large calculations\n\n            **Clinical Applications:**\n            - Update importance scores after model retraining\n            - Assess feature relevance for new patient cohorts\n            - Validate importance stability across time periods\n            - Support feature engineering decisions\n\n            **Use Cases:**\n            - Model maintenance and updates\n            - Feature selection optimization\n            - Interpretability validation\n            - Research analysis of changing feature importance\n            - Quality assurance for model evolution","operationId":"recalculate_feature_importance_v1_explainability_models__model_version__recalculate_importance_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"model_version","in":"path","required":true,"schema":{"type":"string","title":"Model Version"}},{"name":"sample_size","in":"query","required":false,"schema":{"type":"integer","maximum":10000,"minimum":100,"description":"Sample size for calculation","default":1000,"title":"Sample Size"},"description":"Sample size for calculation"}],"responses":{"200":{"description":"Feature importance recalculation completed successfully","content":{"application/json":{"schema":{},"example":{"message":"Feature importance recalculated for model 1.2.0","features_calculated":15,"sample_size_used":1000,"calculation_time_seconds":45.2,"recalculated_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Model version not found or insufficient prediction data","content":{"application/json":{"example":{"error":"Not Found","detail":"Model version 1.2.0 not found or insufficient prediction data for importance calculation","timestamp":"2025-01-15T10:30:00","request_id":"123e4567-e89b-12d3-a456-426614174000"},"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"500":{"description":"Internal server error during importance recalculation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schema__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/ensemble/ensembles":{"post":{"tags":["ensemble","Ensemble Methods"],"summary":"Create Ensemble Configuration","description":"Create a new ensemble configuration to combine multiple machine learning models for improved prediction accuracy.\n\n            **Ensemble Types:**\n            - **Averaging**: Simple average of all model predictions\n            - **Weighted Averaging**: Custom weights for each model's contribution\n            - **Voting**: Majority or soft voting among models\n            - **Stacking**: Meta-model learns to combine base model predictions\n            - **Boosting**: Sequential model combination with error correction\n\n            **Configuration Options:**\n            - **model_ids**: List of base model IDs to include in ensemble\n            - **weights**: Optional custom weights for weighted methods\n            - **voting_strategy**: How to combine predictions (majority, soft, weighted)\n            - **meta_model_id**: ID of meta-model for stacking ensembles\n            - **threshold**: Decision threshold for binary classification\n\n            **Performance Benefits:**\n            - Improved prediction accuracy through model diversity\n            - Reduced variance and overfitting\n            - Better generalization to unseen data\n            - Robustness against individual model failures\n\n            **Clinical Applications:**\n            - Combine different IIT risk prediction models\n            - Leverage complementary strengths of various algorithms\n            - Increase confidence in high-stakes clinical predictions\n            - Provide more reliable risk assessments\n\n            **Use Cases:**\n            - Production model deployment with improved accuracy\n            - A/B testing different model combinations\n            - Research on ensemble effectiveness for IIT prediction\n            - Redundancy and reliability in clinical decision support","operationId":"create_ensemble_v1_ensemble_ensembles_post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnsembleCreateRequest"}}}},"responses":{"200":{"description":"Ensemble created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnsembleResponse"},"example":{"ensemble_id":"ensemble_abc123","ensemble_type":"weighted_averaging","model_ids":["model_1","model_2","model_3"],"weights":[0.5,0.3,0.2],"voting_strategy":"soft","threshold":0.5,"created_at":"2025-01-15T10:30:00"}}}},"400":{"description":"Invalid ensemble configuration","content":{"application/json":{"example":{"detail":"Invalid ensemble type or model configuration"}}}},"500":{"description":"Internal server error during ensemble creation"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["ensemble","Ensemble Methods"],"summary":"List Ensemble Configurations","description":"Retrieve a list of all ensemble configurations with optional filtering by ensemble type.\n\n            **Filtering Options:**\n            - **ensemble_type**: Filter results by specific ensemble type\n            - Results ordered by creation date (newest first)\n\n            **Ensemble Information Returned:**\n            - **ensemble_id**: Unique identifier for the ensemble\n            - **ensemble_type**: Type of ensemble (averaging, voting, stacking, etc.)\n            - **model_ids**: List of base model IDs in the ensemble\n            - **weights**: Custom weights if applicable\n            - **voting_strategy**: Strategy for combining predictions\n            - **meta_model_id**: Meta-model for stacking ensembles\n            - **threshold**: Decision threshold for predictions\n            - **created_at**: Timestamp of ensemble creation\n\n            **Use Cases:**\n            - Browse available ensemble configurations\n            - Find ensembles by type for specific use cases\n            - Review ensemble configurations before making predictions\n            - Audit and management of ensemble models","operationId":"list_ensembles_v1_ensemble_ensembles_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"ensemble_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/EnsembleTypeEnum"},{"type":"null"}],"description":"Filter by ensemble type","title":"Ensemble Type"},"description":"Filter by ensemble type"}],"responses":{"200":{"description":"Ensemble configurations retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EnsembleResponse"},"title":"Response 200 List Ensembles V1 Ensemble Ensembles Get"},"example":[{"ensemble_id":"ensemble_abc123","ensemble_type":"weighted_averaging","model_ids":["model_1","model_2"],"weights":[0.6,0.4],"voting_strategy":"soft","threshold":0.5,"created_at":"2025-01-15T10:30:00"}]}}},"500":{"description":"Internal server error during ensemble retrieval"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/ensemble/ensembles/{ensemble_id}":{"get":{"tags":["ensemble","Ensemble Methods"],"summary":"Get Ensemble Configuration","description":"Retrieve detailed information about a specific ensemble configuration.\n\n            **Configuration Details:**\n            - Complete ensemble configuration parameters\n            - List of constituent models and their roles\n            - Weights and voting strategy settings\n            - Meta-model information for stacking ensembles\n            - Creation timestamp for tracking\n\n            **Use Cases:**\n            - Review ensemble configuration before deployment\n            - Understand model composition and weights\n            - Debug ensemble prediction behavior\n            - Audit ensemble configurations for compliance\n            - Document ensemble setup for research purposes","operationId":"get_ensemble_v1_ensemble_ensembles__ensemble_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"ensemble_id","in":"path","required":true,"schema":{"type":"string","title":"Ensemble Id"}}],"responses":{"200":{"description":"Ensemble configuration retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnsembleResponse"},"example":{"ensemble_id":"ensemble_abc123","ensemble_type":"stacking","model_ids":["model_1","model_2","model_3"],"voting_strategy":"soft","meta_model_id":"meta_model_1","threshold":0.5,"created_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Ensemble configuration not found","content":{"application/json":{"example":{"detail":"Ensemble not found"}}}},"500":{"description":"Internal server error during ensemble retrieval"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["ensemble","Ensemble Methods"],"summary":"Delete Ensemble Configuration","description":"Permanently delete an ensemble configuration and all associated predictions.\n\n            **Deletion Process:**\n            1. **Ensemble Lookup**: Verify ensemble exists\n            2. **Prediction Cleanup**: Delete all predictions made by this ensemble\n            3. **Ensemble Removal**: Delete the ensemble configuration\n            4. **Database Commit**: Permanently apply changes\n\n            **Impact:**\n            - Ensemble configuration permanently removed\n            - All historical predictions from this ensemble deleted\n            - No recovery possible after deletion\n            - Ensemble ID becomes unavailable for future use\n\n            **Safety Considerations:**\n            - Requires explicit ensemble_id confirmation\n            - Cascading deletion of associated predictions\n            - Database transaction with rollback on error\n\n            **Use Cases:**\n            - Remove deprecated or poorly performing ensembles\n            - Clean up test/development ensemble configurations\n            - Manage ensemble lifecycle and maintenance\n\n            **Warning:**\n            - This action cannot be undone\n            - Consider archiving important ensemble data before deletion","operationId":"delete_ensemble_v1_ensemble_ensembles__ensemble_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"ensemble_id","in":"path","required":true,"schema":{"type":"string","title":"Ensemble Id"}}],"responses":{"200":{"description":"Ensemble deleted successfully","content":{"application/json":{"schema":{},"example":{"message":"Ensemble ensemble_abc123 deleted successfully"}}}},"404":{"description":"Ensemble configuration not found"},"500":{"description":"Internal server error during ensemble deletion"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/ensemble/ensembles/{ensemble_id}/predict":{"post":{"tags":["ensemble","Ensemble Methods"],"summary":"Make Ensemble Prediction","description":"Generate an IIT risk prediction using a specified ensemble configuration.\n\n            **Prediction Process:**\n            1. **Feature Preparation**: Extract and validate patient features\n            2. **Base Model Predictions**: Generate predictions from all constituent models\n            3. **Ensemble Combination**: Combine predictions using configured strategy\n            4. **Risk Assessment**: Calculate final risk score and classification\n            5. **Confidence Calculation**: Assess prediction reliability\n\n            **Response Components:**\n            - **ensemble_score**: Final combined risk score (0-1)\n            - **risk_level**: Categorized risk (Low, Medium, High)\n            - **individual_predictions**: Scores from each base model\n            - **confidence_score**: Reliability measure of the prediction\n            - **prediction_id**: Unique identifier for result tracking\n\n            **Ensemble Strategies:**\n            - **Averaging**: Mean of all model scores\n            - **Weighted Averaging**: Custom weighted mean\n            - **Voting**: Majority or soft voting\n            - **Stacking**: Meta-model prediction\n            - **Boosting**: Sequential model combination\n\n            **Clinical Applications:**\n            - High-accuracy IIT risk assessment\n            - Leveraging multiple model perspectives\n            - Increased confidence in predictions\n            - Robust clinical decision support\n\n            **Use Cases:**\n            - Production risk prediction with improved accuracy\n            - A/B testing ensemble vs single model performance\n            - Research on ensemble effectiveness\n            - Redundancy in critical clinical predictions","operationId":"predict_with_ensemble_v1_ensemble_ensembles__ensemble_id__predict_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"ensemble_id","in":"path","required":true,"schema":{"type":"string","title":"Ensemble Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnsemblePredictionRequest"}}}},"responses":{"200":{"description":"Ensemble prediction generated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnsemblePredictionResponse"},"example":{"ensemble_id":"ensemble_abc123","prediction_id":"pred_xyz789","patient_uuid":"patient_123","ensemble_score":0.68,"risk_level":"High","individual_predictions":{"model_1":0.65,"model_2":0.72,"model_3":0.67},"confidence_score":0.85,"created_at":"2025-01-15T10:30:00"}}}},"404":{"description":"Ensemble configuration not found","content":{"application/json":{"example":{"detail":"Ensemble not found"}}}},"500":{"description":"Internal server error during prediction"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/ensemble/ensembles/{ensemble_id}/predictions":{"get":{"tags":["ensemble","Ensemble Methods"],"summary":"Get Ensemble Predictions","description":"Retrieve predictions made by a specific ensemble configuration with optional filtering.\n\n            **Filtering Options:**\n            - **patient_uuid**: Filter predictions for a specific patient\n            - **limit**: Maximum number of results (1-1000, default: 50)\n            - **offset**: Number of results to skip for pagination\n\n            **Prediction Information:**\n            - **prediction_id**: Unique identifier for each prediction\n            - **patient_uuid**: Patient associated with the prediction\n            - **ensemble_score**: Final risk score from ensemble\n            - **risk_level**: Categorized risk level\n            - **individual_predictions**: Scores from each base model\n            - **confidence_score**: Prediction reliability measure\n            - **created_at**: Timestamp of prediction generation\n\n            **Sorting:**\n            - Results ordered by creation date (newest first)\n            - Chronological access to prediction history\n\n            **Use Cases:**\n            - Review ensemble prediction history\n            - Analyze prediction patterns for specific patients\n            - Audit ensemble performance over time\n            - Research data extraction for analysis","operationId":"get_ensemble_predictions_v1_ensemble_ensembles__ensemble_id__predictions_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"ensemble_id","in":"path","required":true,"schema":{"type":"string","title":"Ensemble Id"}},{"name":"patient_uuid","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by patient UUID","title":"Patient Uuid"},"description":"Filter by patient UUID"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of results","default":50,"title":"Limit"},"description":"Maximum number of results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of results to skip","default":0,"title":"Offset"},"description":"Number of results to skip"}],"responses":{"200":{"description":"Ensemble predictions retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EnsemblePredictionResponse"},"title":"Response 200 Get Ensemble Predictions V1 Ensemble Ensembles  Ensemble Id  Predictions Get"}}}},"500":{"description":"Internal server error during prediction retrieval"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/ensemble/ensembles/{ensemble_id}/performance":{"get":{"tags":["ensemble","Ensemble Methods"],"summary":"Get Ensemble Performance Metrics","description":"Retrieve performance metrics for a specific ensemble configuration based on historical predictions.\n\n            **Metrics Calculated:**\n            - **total_predictions**: Number of predictions made by ensemble\n            - **average_score**: Mean ensemble risk score across all predictions\n            - **score_std**: Standard deviation of risk scores (variability measure)\n            - **average_confidence**: Mean confidence score across predictions\n            - **risk_distribution**: Breakdown of predictions by risk level\n\n            **Performance Insights:**\n            - Ensemble consistency through score variability\n            - Prediction reliability through confidence scores\n            - Risk level distribution patterns\n            - Overall ensemble behavior analysis\n\n            **Data Scope:**\n            - Based on most recent 1000 predictions\n            - Representative of current ensemble performance\n            - Updated continuously as new predictions are made\n\n            **Use Cases:**\n            - Monitor ensemble performance over time\n            - Compare different ensemble configurations\n            - Identify performance degradation or improvement\n            - Validate ensemble effectiveness for clinical use","operationId":"get_ensemble_performance_v1_ensemble_ensembles__ensemble_id__performance_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"ensemble_id","in":"path","required":true,"schema":{"type":"string","title":"Ensemble Id"}}],"responses":{"200":{"description":"Ensemble performance metrics retrieved successfully","content":{"application/json":{"schema":{}}}},"404":{"description":"Ensemble configuration not found or no predictions available"},"500":{"description":"Internal server error during performance calculation"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/ensemble/ensemble-types":{"get":{"tags":["ensemble","Ensemble Methods"],"summary":"Get Available Ensemble Types","description":"Retrieve information about all available ensemble types and their configuration options.\n\n            **Ensemble Types Documented:**\n            - **Averaging**: Simple average of all model predictions with equal weights\n            - **Weighted Averaging**: Custom weights for each model's contribution\n            - **Voting**: Majority or soft voting strategies for combining predictions\n            - **Weighted Voting**: Voting with custom weights for each model\n            - **Stacking**: Meta-model learns optimal combination of base predictions\n            - **Boosting**: Sequential model combination with error correction\n\n            **Type Information Provided:**\n            - **type**: Machine-readable type identifier\n            - **name**: Human-readable type name\n            - **description**: Detailed explanation of the ensemble method\n\n            **Use Cases:**\n            - Explore available ensemble strategies\n            - Understand ensemble type differences before configuration\n            - API documentation and discovery\n            - UI dropdown population for ensemble creation","operationId":"get_ensemble_types_v1_ensemble_ensemble_types_get","responses":{"200":{"description":"Ensemble types retrieved successfully","content":{"application/json":{"schema":{},"example":{"types":[{"type":"averaging","name":"Simple Averaging","description":"Average predictions from all models with equal weights"},{"type":"stacking","name":"Stacking","description":"Use a meta-model to combine predictions from base models"}]}}}}}}},"/v1/backup/database/backup":{"post":{"tags":["backup","backup"],"summary":"Create Database Backup","description":"Create a backup of the application database.\n\n            **Backup Process:**\n            1. **Backup Name Generation**: Auto-generates timestamped backup name or uses custom name\n            2. **Database Copy**: Creates full copy of database file\n            3. **Storage**: Saves backup to configured backup directory\n            4. **Metadata**: Records backup size and creation timestamp\n\n            **Backup Contents:**\n            - Complete database schema and data\n            - All tables: patients, predictions, users, ensembles, etc.\n            - Relationships and constraints\n            - Indexes and triggers\n\n            **Storage Location:**\n            - Configured backup directory (settings.backup_dir)\n            - File format: {backup_name}.db\n            - Automatic directory creation if needed\n\n            **Security:**\n            - Requires admin privileges\n            - Backup files inherit system file permissions\n            - Sensitive healthcare data protection\n\n            **Use Cases:**\n            - Regular database backups for disaster recovery\n            - Pre-deployment backups before major changes\n            - Data migration and export\n            - Compliance and audit trail requirements\n\n            **Performance:**\n            - Backup duration depends on database size\n            - Minimal impact on system performance\n            - Non-blocking operation for active requests","operationId":"create_database_backup_v1_backup_database_backup_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"backup_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backup Name"}}],"responses":{"200":{"description":"Database backup created successfully","content":{"application/json":{"schema":{},"example":{"message":"Database backup created successfully","backup_path":"/backups/backup_20250115_103000.db","backup_name":"backup_20250115_103000","file_size_bytes":2048000,"created_at":"2025-01-15T10:30:00"}}}},"403":{"description":"Admin privileges required"},"500":{"description":"Internal server error during backup creation"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/backup/database/restore":{"post":{"tags":["backup","backup"],"summary":"Restore Database from Backup","description":"Restore the application database from a previously created backup file.\n\n            **Restore Process:**\n            1. **Backup Validation**: Verifies backup file exists\n            2. **Current Database Backup**: Creates safety backup of current database\n            3. **Database Replacement**: Replaces current database with backup\n            4. **Validation**: Verifies database integrity after restore\n\n            **Safety Considerations:**\n            - **Destructive Operation**: Overwrites current database completely\n            - **Irreversible**: Cannot undo restore operation\n            - **Data Loss**: All changes since backup will be lost\n            - **Service Impact**: May require application restart\n\n            **Prerequisites:**\n            - Backup file must exist in backup directory\n            - Sufficient disk space for restore operation\n            - Application should be in maintenance mode if possible\n            - Current users should be notified of impending restore\n\n            **Security:**\n            - Requires admin privileges\n            - Audit logging of restore operations\n            - Backup file integrity validation\n\n            **Use Cases:**\n            - Disaster recovery from database corruption\n            - Rollback to previous state after failed deployment\n            - Data recovery from accidental deletion\n            - Testing with production data snapshots\n\n            **Warning:**\n            - This operation cannot be undone\n            - Ensure you have a recent backup before restoring\n            - Consider notifying users of potential data loss","operationId":"restore_database_backup_v1_backup_database_restore_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"backup_name","in":"query","required":true,"schema":{"type":"string","title":"Backup Name"}}],"responses":{"200":{"description":"Database restored successfully","content":{"application/json":{"schema":{},"example":{"message":"Database restored successfully","backup_name":"backup_20250115_103000","restored_at":"2025-01-15T10:30:00"}}}},"403":{"description":"Admin privileges required"},"404":{"description":"Backup file not found"},"500":{"description":"Internal server error during restore"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/backup/database/backups":{"get":{"tags":["backup","backup"],"summary":"List Database Backups","description":"Retrieve a list of all available database backups with metadata.\n\n            **Backup Information Provided:**\n            - **name**: Backup identifier (filename without extension)\n            - **filename**: Full backup filename with extension\n            - **path**: Complete file system path to backup\n            - **size_bytes**: File size in bytes for storage planning\n            - **created_at**: Backup creation timestamp\n            - **modified_at**: Last modification timestamp\n\n            **Sorting:**\n            - Results ordered by creation date (newest first)\n            - Easy access to most recent backups\n            - Chronological backup history\n\n            **Use Cases:**\n            - Browse available backups for restore selection\n            - Monitor backup storage usage\n            - Verify backup schedule compliance\n            - Audit backup history for compliance\n            - Plan backup retention and cleanup\n\n            **Storage Management:**\n            - Identify old backups for cleanup\n            - Monitor total backup storage consumption\n            - Validate backup retention policies","operationId":"list_database_backups_v1_backup_database_backups_get","responses":{"200":{"description":"Database backups listed successfully","content":{"application/json":{"schema":{},"example":{"backups":[{"name":"backup_20250115_103000","filename":"backup_20250115_103000.db","path":"/backups/backup_20250115_103000.db","size_bytes":2048000,"created_at":"2025-01-15T10:30:00","modified_at":"2025-01-15T10:30:00"}]}}}},"403":{"description":"Admin privileges required"},"500":{"description":"Internal server error during backup listing"}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/backup/database/backup/{backup_name}":{"delete":{"tags":["backup","backup"],"summary":"Delete Database Backup","description":"Permanently delete a database backup file.\n\n            **Deletion Process:**\n            1. **Backup Validation**: Verifies backup file exists\n            2. **File Deletion**: Removes backup file from filesystem\n            3. **Confirmation**: Returns success message\n\n            **Impact:**\n            - Backup file permanently removed\n            - No recovery possible after deletion\n            - Frees up storage space\n            - Backup history becomes incomplete\n\n            **Safety Considerations:**\n            - Verify backup is no longer needed before deletion\n            - Consider retention policy requirements\n            - Ensure newer backups exist for recovery\n            - Audit trail of deletion for compliance\n\n            **Use Cases:**\n            - Implement backup retention policies\n            - Free up storage space from old backups\n            - Clean up failed or corrupted backups\n            - Manage backup lifecycle\n\n            **Warning:**\n            - This action cannot be undone\n            - Ensure backup is not needed for compliance or recovery","operationId":"delete_database_backup_v1_backup_database_backup__backup_name__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"backup_name","in":"path","required":true,"schema":{"type":"string","title":"Backup Name"}}],"responses":{"200":{"description":"Backup deleted successfully","content":{"application/json":{"schema":{},"example":{"message":"Backup backup_20250115_103000 deleted successfully"}}}},"403":{"description":"Admin privileges required"},"404":{"description":"Backup file not found"},"500":{"description":"Internal server error during backup deletion"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/backup/database/health":{"get":{"tags":["backup","backup"],"summary":"Get Database Health Status","description":"Retrieve comprehensive health status information for the application database.\n\n            **Health Metrics Provided:**\n            - **database_type**: Type of database (SQLite, PostgreSQL)\n            - **connected**: Connection status (true/false)\n            - **size**: Database size information\n            - **pool_stats**: Connection pool statistics (if applicable)\n            - **status**: Overall health status (healthy, degraded, error)\n            - **timestamp**: Health check execution time\n\n            **Monitoring Use:**\n            - Kubernetes liveness and readiness probes\n            - External monitoring systems (Prometheus, Datadog)\n            - Health check dashboards\n            - Automated alerting on database issues\n\n            **Health Indicators:**\n            - Connection availability and responsiveness\n            - Database size and growth tracking\n            - Connection pool utilization\n            - Query performance metrics\n\n            **No Authentication Required:**\n            - Allows monitoring systems to check health without credentials\n            - Safe endpoint with no sensitive data exposure\n            - Rate limiting recommended for production\n\n            **Use Cases:**\n            - Infrastructure monitoring and alerting\n            - Automated health checks in CI/CD pipelines\n            - Load balancer health checks\n            - Database performance monitoring","operationId":"get_database_health_v1_backup_database_health_get","responses":{"200":{"description":"Database health status retrieved successfully","content":{"application/json":{"schema":{},"example":{"database_type":"SQLite","connected":true,"size":{"total_bytes":10240000,"total_mb":10.24},"pool_stats":{"active_connections":5,"idle_connections":10,"total_connections":15},"status":"healthy","timestamp":"2025-01-15T10:30:00"}}}},"500":{"description":"Database health check failed"}}}},"/v1/backup/model/backup":{"post":{"tags":["backup","backup"],"summary":"Create ML Model Backup","description":"Create a backup of machine learning models and related configuration files.\n\n            **Backup Contents:**\n            - **Trained Model Files**: LightGBM model (.txt or .pkl format)\n            - **Preprocessing Objects**: Scalers, encoders, transformers\n            - **Model Manifest**: Model metadata and configuration\n            - **Feature Specifications**: Feature names and types\n\n            **Files Backed Up:**\n            - settings.model_path: Main trained model file\n            - settings.preprocessing_path: Preprocessing pipeline\n            - settings.model_manifest_path: Model metadata\n\n            **Storage Location:**\n            - {backup_dir}/models/{backup_name}/\n            - Preserves original filenames\n            - Organized by backup timestamp\n\n            **Use Cases:**\n            - Model version control and rollback\n            - Pre-deployment model backups\n            - Model archival for compliance\n            - Disaster recovery for ML models\n\n            **Security:**\n            - Requires admin privileges\n            - Models may contain sensitive patterns learned from healthcare data","operationId":"create_model_backup_v1_backup_model_backup_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"backup_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backup Name"}}],"responses":{"200":{"description":"Model backup created successfully","content":{"application/json":{"schema":{},"example":{"message":"Model backup created successfully","backup_path":"/backups/models/model_backup_20250115_103000","backup_name":"model_backup_20250115_103000","files_backed_up":["model.txt","preprocessing.pkl","model_manifest.json"],"created_at":"2025-01-15T10:30:00"}}}},"403":{"description":"Admin privileges required"},"500":{"description":"Internal server error during model backup"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/backup/model/backups":{"get":{"tags":["backup","backup"],"summary":"List ML Model Backups","description":"Retrieve a list of all available ML model backups with metadata.\n\n            **Backup Information Provided:**\n            - **name**: Backup identifier (directory name)\n            - **path**: Complete file system path to backup directory\n            - **files**: List of files included in backup\n            - **file_count**: Number of files in backup\n            - **created_at**: Backup creation timestamp\n\n            **Sorting:**\n            - Results ordered by creation date (newest first)\n            - Easy access to most recent model backups\n\n            **Use Cases:**\n            - Browse available model backups for restore\n            - Monitor model backup storage usage\n            - Track model version history\n            - Verify backup schedule compliance","operationId":"list_model_backups_v1_backup_model_backups_get","responses":{"200":{"description":"Model backups listed successfully","content":{"application/json":{"schema":{},"example":{"backups":[{"name":"model_backup_20250115_103000","path":"/backups/models/model_backup_20250115_103000","files":["model.txt","preprocessing.pkl","model_manifest.json"],"file_count":3,"created_at":"2025-01-15T10:30:00"}]}}}},"403":{"description":"Admin privileges required"},"500":{"description":"Internal server error during model backup listing"}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/backup/full-backup":{"post":{"tags":["backup","backup"],"summary":"Create Full System Backup","description":"Create a comprehensive backup of both the database and ML models.\n\n            **Full Backup Contents:**\n            - **Database Backup**: Complete application database with all tables\n            - **Model Backup**: Trained models and preprocessing objects\n            - **Configuration**: Model manifests and metadata\n            - **Integrated Snapshot**: Consistent point-in-time system state\n\n            **Backup Structure:**\n            ```\n            {backup_dir}/full/{backup_name}/\n             {backup_name}_db.db          # Database backup\n             models/                       # Model files\n                 model.txt\n                 preprocessing.pkl\n                 model_manifest.json\n            ```\n\n            **Advantages:**\n            - **Consistency**: Database and models from same point in time\n            - **Complete Recovery**: Single backup for full system restore\n            - **Simplified Management**: One backup vs multiple separate backups\n\n            **Use Cases:**\n            - Complete system snapshots for disaster recovery\n            - Pre-deployment backups before major releases\n            - Compliance requirements for data + model backups\n            - System migration and replication","operationId":"create_full_backup_v1_backup_full_backup_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"backup_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backup Name"}}],"responses":{"200":{"description":"Full system backup created successfully","content":{"application/json":{"schema":{},"example":{"message":"Full system backup created successfully","backup_path":"/backups/full/full_backup_20250115_103000","backup_name":"full_backup_20250115_103000","database_backup":{"path":"/backups/full/full_backup_20250115_103000/full_backup_20250115_103000_db.db","size_bytes":2048000},"model_backup":{"path":"/backups/full/full_backup_20250115_103000/models","files":["model.txt","preprocessing.pkl","model_manifest.json"]},"created_at":"2025-01-15T10:30:00"}}}},"403":{"description":"Admin privileges required"},"500":{"description":"Internal server error during full backup creation"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/etl/run-full-pipeline":{"post":{"tags":["etl","etl"],"summary":"Run Full Etl Pipeline","description":"Run the complete ETL pipeline\n\nRequires admin privileges","operationId":"run_full_etl_pipeline_v1_etl_run_full_pipeline_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"force_refresh","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Force Refresh"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/etl/ingest-data":{"post":{"tags":["etl","etl"],"summary":"Ingest Data","description":"Ingest data from specified source\n\nRequires admin privileges","operationId":"ingest_data_v1_etl_ingest_data_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"data_source","in":"query","required":true,"schema":{"type":"string","title":"Data Source"}},{"name":"source_type","in":"query","required":false,"schema":{"type":"string","default":"json","title":"Source Type"}},{"name":"batch_size","in":"query","required":false,"schema":{"type":"integer","default":1000,"title":"Batch Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/etl/process-features":{"post":{"tags":["etl","etl"],"summary":"Process Features","description":"Process features for IIT prediction\n\nRequires admin privileges","operationId":"process_features_v1_etl_process_features_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"force_reprocess","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Force Reprocess"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"title":"Patient Ids"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/etl/status":{"get":{"tags":["etl","etl"],"summary":"Get Etl Status","description":"Get current ETL pipeline status\n\nRequires admin privileges","operationId":"get_etl_status_v1_etl_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/etl/ingestion/stats":{"get":{"tags":["etl","etl"],"summary":"Get Ingestion Stats","description":"Get data ingestion statistics\n\nRequires admin privileges","operationId":"get_ingestion_stats_v1_etl_ingestion_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/etl/processing/stats":{"get":{"tags":["etl","etl"],"summary":"Get Processing Stats","description":"Get data processing statistics\n\nRequires admin privileges","operationId":"get_processing_stats_v1_etl_processing_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/etl/validate-data":{"post":{"tags":["etl","etl"],"summary":"Validate Data Source","description":"Validate data source before ingestion\n\nRequires admin privileges","operationId":"validate_data_source_v1_etl_validate_data_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"data_source","in":"query","required":true,"schema":{"type":"string","title":"Data Source"}},{"name":"source_type","in":"query","required":false,"schema":{"type":"string","default":"json","title":"Source Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/etl/cleanup":{"delete":{"tags":["etl","etl"],"summary":"Cleanup Etl Data","description":"Clean up ETL temporary data and files\n\nRequires admin privileges","operationId":"cleanup_etl_data_v1_etl_cleanup_delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"cleanup_type","in":"query","required":false,"schema":{"type":"string","default":"temp_files","title":"Cleanup Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/etl/sources":{"get":{"tags":["etl","etl"],"summary":"List Data Sources","description":"List available data sources for ingestion\n\nRequires admin privileges","operationId":"list_data_sources_v1_etl_sources_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/etl/schedule":{"post":{"tags":["etl","etl"],"summary":"Schedule Etl Job","description":"Schedule an ETL job for periodic execution\n\nRequires admin privileges","operationId":"schedule_etl_job_v1_etl_schedule_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"job_type","in":"query","required":true,"schema":{"type":"string","title":"Job Type"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Schedule Config"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/cache/stats":{"get":{"tags":["cache","cache"],"summary":"Get Cache Stats","description":"Get comprehensive cache statistics\n\nRequires admin privileges","operationId":"get_cache_stats_v1_cache_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/cache/invalidate/all":{"post":{"tags":["cache","cache"],"summary":"Invalidate All Cache","description":"Invalidate all cache entries\n\nRequires admin privileges","operationId":"invalidate_all_cache_v1_cache_invalidate_all_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/cache/invalidate/patient/{patient_uuid}":{"post":{"tags":["cache","cache"],"summary":"Invalidate Patient Cache","description":"Invalidate cache for a specific patient\n\nRequires admin privileges","operationId":"invalidate_patient_cache_v1_cache_invalidate_patient__patient_uuid__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"patient_uuid","in":"path","required":true,"schema":{"type":"string","title":"Patient Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/cache/invalidate/endpoint/{endpoint}":{"post":{"tags":["cache","cache"],"summary":"Invalidate Endpoint Cache","description":"Invalidate cache for a specific endpoint\n\nRequires admin privileges","operationId":"invalidate_endpoint_cache_v1_cache_invalidate_endpoint__endpoint__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"endpoint","in":"path","required":true,"schema":{"type":"string","title":"Endpoint"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/cache/invalidate/model/{model_name}":{"post":{"tags":["cache","cache"],"summary":"Invalidate Model Cache","description":"Invalidate cache for a specific model\n\nRequires admin privileges","operationId":"invalidate_model_cache_v1_cache_invalidate_model__model_name__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"model_name","in":"path","required":true,"schema":{"type":"string","title":"Model Name"}},{"name":"record_ids","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Record Ids"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/cache/health":{"get":{"tags":["cache","cache"],"summary":"Get Cache Health","description":"Get cache health status (no auth required for monitoring)","operationId":"get_cache_health_v1_cache_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/cache/warmup":{"post":{"tags":["cache","cache"],"summary":"Warmup Cache","description":"Warm up cache with frequently accessed data\n\nRequires admin privileges","operationId":"warmup_cache_v1_cache_warmup_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/cache/config":{"get":{"tags":["cache","cache"],"summary":"Get Cache Config","description":"Get current cache configuration\n\nRequires admin privileges","operationId":"get_cache_config_v1_cache_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/security/audit-logs":{"get":{"tags":["security","Security"],"summary":"Get Security Audit Logs","description":"Retrieve security audit logs with filtering","operationId":"get_security_audit_logs_v1_security_audit_logs_get","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityAuditLogRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Security Audit Logs V1 Security Audit Logs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/security/config":{"get":{"tags":["security","Security"],"summary":"Get Security Config","description":"Get current security configuration","operationId":"get_security_config_v1_security_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Security Config V1 Security Config Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["security","Security"],"summary":"Update Security Config","description":"Update security configuration (admin only)","operationId":"update_security_config_v1_security_config_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityConfigRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Update Security Config V1 Security Config Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/security/stats":{"get":{"tags":["security","Security"],"summary":"Get Security Stats","description":"Get security statistics and monitoring data","operationId":"get_security_stats_v1_security_stats_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to analyze","default":30,"title":"Days"},"description":"Number of days to analyze"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Security Stats V1 Security Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/feature-flags":{"get":{"tags":["feature-flags","Feature Flags"],"summary":"List All Feature Flags","description":"Retrieve all feature flags in the system.\n    \n    **Returns:**\n    - List of all feature flags with their configurations\n    - Includes enabled status, rollout percentage, and whitelist\n    \n    **Permissions:**\n    - Requires active user authentication\n    - All users can view flags (read-only access)","operationId":"list_feature_flags_v1_feature_flags_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/FeatureFlagResponse"},"type":"array","title":"Response List Feature Flags V1 Feature Flags Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["feature-flags","Feature Flags"],"summary":"Create Feature Flag","description":"Create a new feature flag.\n    \n    **Permissions:**\n    - Requires superuser/admin privileges\n    \n    **Parameters:**\n    - name: Unique name for the flag (required)\n    - description: Optional description\n    - enabled: Whether the flag is enabled (default: false)\n    - user_percentage: Percentage rollout 0-100 (default: 0)\n    - user_whitelist: List of user IDs to always enable\n    - environment_override: Environment to force enable\n    \n    **Error:**\n    - 400: Flag with this name already exists","operationId":"create_feature_flag_v1_feature_flags_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/feature-flags/{flag_name}":{"get":{"tags":["feature-flags","Feature Flags"],"summary":"Get Feature Flag Configuration","description":"Retrieve configuration for a specific feature flag.\n    \n    **Parameters:**\n    - flag_name: Name of the feature flag to retrieve\n    \n    **Returns:**\n    - Feature flag configuration including rollout settings\n    \n    **Error:**\n    - 404: Feature flag not found","operationId":"get_feature_flag_v1_feature_flags__flag_name__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"flag_name","in":"path","required":true,"schema":{"type":"string","title":"Flag Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["feature-flags","Feature Flags"],"summary":"Update Feature Flag","description":"Update an existing feature flag.\n    \n    **Permissions:**\n    - Requires superuser/admin privileges\n    \n    **Parameters:**\n    - All parameters are optional\n    - Only provided fields will be updated\n    \n    **Error:**\n    - 404: Feature flag not found","operationId":"update_feature_flag_v1_feature_flags__flag_name__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"flag_name","in":"path","required":true,"schema":{"type":"string","title":"Flag Name"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["feature-flags","Feature Flags"],"summary":"Delete Feature Flag","description":"Delete a feature flag from the system.\n    \n    **Permissions:**\n    - Requires superuser/admin privileges\n    \n    **Warning:**\n    - This action cannot be undone\n    - Code referencing this flag will use default values\n    \n    **Error:**\n    - 404: Feature flag not found","operationId":"delete_feature_flag_v1_feature_flags__flag_name__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"flag_name","in":"path","required":true,"schema":{"type":"string","title":"Flag Name"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/feature-flags/{flag_name}/check":{"post":{"tags":["feature-flags","Feature Flags"],"summary":"Check Feature Flag for User","description":"Check if a feature flag is enabled for a specific user.\n    \n    **Use Case:**\n    - Frontend can query this endpoint to determine feature availability\n    - Useful for A/B testing and gradual rollouts\n    \n    **Parameters:**\n    - flag_name: Name of the feature flag to check\n    - user_id: Optional user ID for percentage-based rollout\n    - environment: Current environment (default: production)\n    \n    **Returns:**\n    - enabled: true if feature is enabled for the user","operationId":"check_feature_flag_v1_feature_flags__flag_name__check_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"flag_name","in":"path","required":true,"schema":{"type":"string","title":"Flag Name"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagCheckRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["feature-flags","Feature Flags"],"summary":"Check Feature Flag (GET)","description":"Check if a feature flag is enabled (GET method for simpler queries).\n    \n    **Query Parameters:**\n    - user_id: Optional user ID for percentage-based rollout\n    - environment: Current environment (default: production)","operationId":"check_feature_flag_get_v1_feature_flags__flag_name__check_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"flag_name","in":"path","required":true,"schema":{"type":"string","title":"Flag Name"}},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User ID for percentage-based rollout","title":"User Id"},"description":"User ID for percentage-based rollout"},{"name":"environment","in":"query","required":false,"schema":{"type":"string","description":"Current environment","default":"production","title":"Environment"},"description":"Current environment"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureFlagCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/queue/stats":{"get":{"tags":["queue","Queue"],"summary":"Get Queue Statistics","description":"Get current statistics for the job queue.\n    \n    **Returns:**\n    - Number of queued jobs\n    - Number of failed jobs\n    - Number of started jobs\n    - Number of finished jobs\n    - Number of active workers\n    \n    **Permissions:**\n    - Requires active user authentication","operationId":"get_queue_statistics_v1_queue_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueStatsResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/jobs/{job_id}":{"get":{"tags":["queue","Queue"],"summary":"Get Job Status","description":"Get the status of a specific job by ID.\n    \n    **Parameters:**\n    - job_id: The ID of the job to query\n    \n    **Returns:**\n    - Job status (queued, started, finished, failed)\n    - Timestamps for job lifecycle\n    - Result or error information\n    \n    **Error:**\n    - 404: Job not found","operationId":"get_job_status_endpoint_v1_queue_jobs__job_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["queue","Queue"],"summary":"Cancel Job","description":"Cancel a queued job by ID.\n    \n    **Note:** Only jobs that are still queued can be cancelled.\n    Jobs that are already started or finished cannot be cancelled.\n    \n    **Error:**\n    - 404: Job not found\n    - 400: Job cannot be cancelled (already started/finished)","operationId":"cancel_job_endpoint_v1_queue_jobs__job_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/queue/jobs/etl":{"post":{"tags":["queue","Queue"],"summary":"Enqueue ETL Job","description":"Enqueue an ETL data processing job for background execution.\n    \n    **Parameters:**\n    - source_file_path: Path to the source data file\n    - batch_size: Number of records to process per batch (default: 100)\n    \n    **Returns:**\n    - Job ID for tracking\n    \n    **Use Case:**\n    - Process large data files asynchronously\n    - Avoid blocking API responses during ETL","operationId":"enqueue_etl_job_v1_queue_jobs_etl_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnqueueETLRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobEnqueuedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/jobs/batch-prediction":{"post":{"tags":["queue","Queue"],"summary":"Enqueue Batch Prediction Job","description":"Enqueue a batch prediction job for multiple patients.\n    \n    **Parameters:**\n    - patient_uuids: List of patient UUIDs to predict\n    - model_version: Optional model version to use\n    \n    **Returns:**\n    - Job ID for tracking\n    \n    **Use Case:**\n    - Generate predictions for multiple patients asynchronously\n    - Process large batches without blocking","operationId":"enqueue_batch_prediction_job_endpoint_v1_queue_jobs_batch_prediction_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnqueueBatchPredictionRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobEnqueuedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/jobs/report":{"post":{"tags":["queue","Queue"],"summary":"Enqueue Report Generation Job","description":"Enqueue a report generation job.\n    \n    **Parameters:**\n    - report_type: Type of report (predictions, patients, analytics)\n    - start_date: Start date for report period (ISO format)\n    - end_date: End date for report period (ISO format)\n    - filters: Optional filters for the report\n    \n    **Returns:**\n    - Job ID for tracking\n    \n    **Use Case:**\n    - Generate large reports asynchronously\n    - Schedule periodic report generation","operationId":"enqueue_report_job_endpoint_v1_queue_jobs_report_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnqueueReportRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobEnqueuedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/jobs/cleanup":{"post":{"tags":["queue","Queue"],"summary":"Enqueue Cleanup Job","description":"Enqueue a data cleanup job.\n    \n    **Parameters:**\n    - days_to_keep: Number of days of data to keep\n    - dry_run: If True, only report what would be deleted\n    \n    **Returns:**\n    - Job ID for tracking\n    \n    **Use Case:**\n    - Schedule periodic data cleanup\n    - Remove old data asynchronously","operationId":"enqueue_cleanup_job_endpoint_v1_queue_jobs_cleanup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnqueueCleanupRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobEnqueuedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/workers":{"get":{"tags":["queue","Queue"],"summary":"Get All Workers","description":"Get information about all active workers.\n    \n    **Returns:**\n    - List of worker information including:\n      - Worker name\n      - Current state\n      - Current job (if any)\n      - Queues being processed\n    \n    **Permissions:**\n    - Requires active user authentication","operationId":"get_workers_endpoint_v1_queue_workers_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/WorkerInfo"},"type":"array","title":"Response Get Workers Endpoint V1 Queue Workers Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/scheduled":{"get":{"tags":["queue","Queue"],"summary":"Get Scheduled Jobs","description":"Get all scheduled jobs.\n    \n    **Returns:**\n    - List of scheduled job information\n    \n    **Permissions:**\n    - Requires active user authentication","operationId":"get_scheduled_jobs_endpoint_v1_queue_scheduled_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ScheduledJobInfo"},"type":"array","title":"Response Get Scheduled Jobs Endpoint V1 Queue Scheduled Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/scheduled/{job_id}":{"delete":{"tags":["queue","Queue"],"summary":"Cancel Scheduled Job","description":"Cancel a scheduled job by ID.\n    \n    **Error:**\n    - 404: Scheduled job not found\n    - 400: Failed to cancel job\n    \n    **Permissions:**\n    - Requires superuser privileges","operationId":"cancel_scheduled_job_endpoint_v1_queue_scheduled__job_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/queue/schedule/cleanup":{"post":{"tags":["queue","Queue"],"summary":"Schedule Daily Cleanup","description":"Schedule a daily data cleanup job.\n    \n    **Parameters:**\n    - hour: Hour to run (0-23, default: 2)\n    - minute: Minute to run (0-59, default: 0)\n    - days_to_keep: Days of data to keep (default: 90)\n    \n    **Returns:**\n    - Scheduled job ID\n    \n    **Permissions:**\n    - Requires superuser privileges","operationId":"schedule_cleanup_endpoint_v1_queue_schedule_cleanup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleCleanupRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobEnqueuedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/queue/scheduler/status":{"get":{"tags":["queue","Queue"],"summary":"Get Scheduler Status","description":"Get the current status of the scheduler.\n    \n    **Returns:**\n    - Scheduler running status\n    - Total scheduled jobs\n    - Queue name\n    - Check interval\n    \n    **Permissions:**\n    - Requires active user authentication","operationId":"get_scheduler_status_endpoint_v1_queue_scheduler_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Scheduler Status Endpoint V1 Queue Scheduler Status Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"BatchPredictionRequest":{"properties":{"predictions":{"items":{"$ref":"#/components/schemas/PredictionCreate"},"type":"array","maxItems":100,"title":"Predictions"}},"type":"object","required":["predictions"],"title":"BatchPredictionRequest","description":"Request model for batch predictions"},"BatchPredictionResponse":{"properties":{"successful_predictions":{"items":{"$ref":"#/components/schemas/PredictionResponse"},"type":"array","title":"Successful Predictions"},"failed_predictions":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Failed Predictions"},"total_processed":{"type":"integer","title":"Total Processed"},"total_failed":{"type":"integer","title":"Total Failed"}},"type":"object","required":["successful_predictions","failed_predictions","total_processed","total_failed"],"title":"BatchPredictionResponse","description":"Response model for batch predictions"},"Body_login_for_access_token_v1_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_v1_auth_login_post"},"BulkObservationCreate":{"properties":{"observations":{"items":{"$ref":"#/components/schemas/ObservationCreate"},"type":"array","maxItems":1000,"title":"Observations"}},"type":"object","required":["observations"],"title":"BulkObservationCreate","description":"Bulk observation creation schema"},"BulkObservationResponse":{"properties":{"created_count":{"type":"integer","title":"Created Count"},"error_count":{"type":"integer","title":"Error Count"},"errors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Errors"},"processing_time_seconds":{"type":"number","title":"Processing Time Seconds"}},"type":"object","required":["created_count","error_count","errors","processing_time_seconds"],"title":"BulkObservationResponse","description":"Bulk observation creation response schema"},"EnqueueBatchPredictionRequest":{"properties":{"patient_uuids":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Patient Uuids","description":"List of patient UUIDs"},"model_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model Version","description":"Model version to use"}},"type":"object","required":["patient_uuids"],"title":"EnqueueBatchPredictionRequest","description":"Request to enqueue batch prediction job"},"EnqueueCleanupRequest":{"properties":{"days_to_keep":{"type":"integer","minimum":1.0,"title":"Days To Keep","description":"Days of data to keep","default":90},"dry_run":{"type":"boolean","title":"Dry Run","description":"If True, only report what would be deleted","default":true}},"type":"object","title":"EnqueueCleanupRequest","description":"Request to enqueue cleanup job"},"EnqueueETLRequest":{"properties":{"source_file_path":{"type":"string","title":"Source File Path","description":"Path to source data file"},"batch_size":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Batch Size","description":"Batch size for processing","default":100}},"type":"object","required":["source_file_path"],"title":"EnqueueETLRequest","description":"Request to enqueue ETL job"},"EnqueueReportRequest":{"properties":{"report_type":{"type":"string","title":"Report Type","description":"Type of report to generate"},"start_date":{"type":"string","title":"Start Date","description":"Start date (ISO format)"},"end_date":{"type":"string","title":"End Date","description":"End date (ISO format)"},"filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Filters","description":"Optional filters"}},"type":"object","required":["report_type","start_date","end_date"],"title":"EnqueueReportRequest","description":"Request to enqueue report generation job"},"EnsembleCreateRequest":{"properties":{"ensemble_type":{"$ref":"#/components/schemas/EnsembleTypeEnum"},"model_ids":{"items":{"type":"string"},"type":"array","title":"Model Ids"},"weights":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Weights"},"voting_strategy":{"$ref":"#/components/schemas/VotingStrategyEnum","default":"soft"},"meta_model_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Model Id"},"threshold":{"type":"number","title":"Threshold","default":0.5}},"type":"object","required":["ensemble_type","model_ids"],"title":"EnsembleCreateRequest","description":"Request model for creating ensemble"},"EnsemblePredictionRequest":{"properties":{"patient_uuid":{"type":"string","title":"Patient Uuid"},"features":{"additionalProperties":true,"type":"object","title":"Features"}},"type":"object","required":["patient_uuid","features"],"title":"EnsemblePredictionRequest","description":"Request model for ensemble prediction"},"EnsemblePredictionResponse":{"properties":{"ensemble_id":{"type":"string","title":"Ensemble Id"},"prediction_id":{"type":"string","title":"Prediction Id"},"patient_uuid":{"type":"string","title":"Patient Uuid"},"ensemble_score":{"type":"number","title":"Ensemble Score"},"risk_level":{"type":"string","title":"Risk Level"},"individual_predictions":{"additionalProperties":{"type":"number"},"type":"object","title":"Individual Predictions"},"confidence_score":{"type":"number","title":"Confidence Score"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["ensemble_id","prediction_id","patient_uuid","ensemble_score","risk_level","individual_predictions","confidence_score","created_at"],"title":"EnsemblePredictionResponse","description":"Response model for ensemble prediction"},"EnsembleResponse":{"properties":{"ensemble_id":{"type":"string","title":"Ensemble Id"},"ensemble_type":{"type":"string","title":"Ensemble Type"},"model_ids":{"items":{"type":"string"},"type":"array","title":"Model Ids"},"weights":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Weights"},"voting_strategy":{"type":"string","title":"Voting Strategy"},"meta_model_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Model Id"},"threshold":{"type":"number","title":"Threshold"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["ensemble_id","ensemble_type","model_ids","weights","voting_strategy","meta_model_id","threshold","created_at"],"title":"EnsembleResponse","description":"Response model for ensemble"},"EnsembleTypeEnum":{"type":"string","enum":["averaging","weighted_averaging","voting","weighted_voting","stacking","boosting"],"title":"EnsembleTypeEnum"},"FeatureFlagCheckRequest":{"properties":{"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id","description":"User ID for percentage-based rollout"},"environment":{"type":"string","title":"Environment","description":"Current environment","default":"production"}},"type":"object","title":"FeatureFlagCheckRequest","description":"Request model for checking a feature flag for a user"},"FeatureFlagCheckResponse":{"properties":{"flag_name":{"type":"string","title":"Flag Name"},"enabled":{"type":"boolean","title":"Enabled"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"environment":{"type":"string","title":"Environment"}},"type":"object","required":["flag_name","enabled","user_id","environment"],"title":"FeatureFlagCheckResponse","description":"Response model for feature flag check"},"FeatureFlagCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Unique name for the feature flag"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Description of what the flag controls"},"enabled":{"type":"boolean","title":"Enabled","description":"Whether the flag is enabled","default":false},"user_percentage":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"User Percentage","description":"Percentage of users to enable (0-100)","default":0},"user_whitelist":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"User Whitelist","description":"List of user IDs to always enable"},"environment_override":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Environment Override","description":"Environment to force enable"}},"type":"object","required":["name"],"title":"FeatureFlagCreate","description":"Request model for creating a feature flag"},"FeatureFlagResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"enabled":{"type":"boolean","title":"Enabled"},"user_percentage":{"type":"integer","title":"User Percentage"},"user_whitelist":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"User Whitelist"},"environment_override":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Environment Override"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","name","description","enabled","user_percentage","user_whitelist","environment_override","created_at","updated_at"],"title":"FeatureFlagResponse","description":"Response model for feature flag data"},"FeatureFlagUpdate":{"properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Enabled"},"user_percentage":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"User Percentage"},"user_whitelist":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"User Whitelist"},"environment_override":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Environment Override"}},"type":"object","title":"FeatureFlagUpdate","description":"Request model for updating a feature flag"},"FeatureImportanceResponse":{"properties":{"model_version":{"type":"string","title":"Model Version"},"feature_name":{"type":"string","title":"Feature Name"},"importance_score":{"type":"number","title":"Importance Score"},"calculated_at":{"type":"string","title":"Calculated At"}},"type":"object","required":["model_version","feature_name","importance_score","calculated_at"],"title":"FeatureImportanceResponse","description":"Response model for feature importance"},"FeatureUpdateRequest":{"properties":{"features":{"additionalProperties":true,"type":"object","title":"Features","description":"Features to update"}},"type":"object","required":["features"],"title":"FeatureUpdateRequest","description":"Feature update request schema"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IITFeaturesResponse":{"properties":{"patient_uuid":{"type":"string","title":"Patient Uuid"},"age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Age"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"has_phone":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Phone"},"days_since_last_visit":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Since Last Visit"},"days_since_last_refill":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Since Last Refill"},"total_visits":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Visits"},"viral_load_suppressed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Viral Load Suppressed"},"cd4_count":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cd4 Count"},"last_feature_update":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Feature Update"},"feature_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Feature Version"}},"type":"object","required":["patient_uuid"],"title":"IITFeaturesResponse","description":"IIT features response schema"},"InterpretabilityReportResponse":{"properties":{"model_version":{"type":"string","title":"Model Version"},"feature_importance":{"additionalProperties":{"type":"number"},"type":"object","title":"Feature Importance"},"explanation_patterns":{"additionalProperties":true,"type":"object","title":"Explanation Patterns"},"interpretability_metrics":{"additionalProperties":{"type":"number"},"type":"object","title":"Interpretability Metrics"},"generated_at":{"type":"string","title":"Generated At"}},"type":"object","required":["model_version","feature_importance","explanation_patterns","interpretability_metrics","generated_at"],"title":"InterpretabilityReportResponse","description":"Response model for interpretability report"},"JobEnqueuedResponse":{"properties":{"job_id":{"type":"string","title":"Job Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["job_id","status","message"],"title":"JobEnqueuedResponse","description":"Response when job is enqueued"},"JobStatusResponse":{"properties":{"id":{"type":"string","title":"Id"},"status":{"type":"string","title":"Status"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"ended_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ended At"},"exc_info":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Exc Info"},"result":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Result"}},"type":"object","required":["id","status","created_at","started_at","ended_at","exc_info","result"],"title":"JobStatusResponse","description":"Job status response"},"ObservationCreate":{"properties":{"obs_uuid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Obs Uuid","description":"Optional UUID, auto-generated if not provided"},"patient_uuid":{"type":"string","title":"Patient Uuid","description":"Patient UUID"},"encounter_id":{"type":"integer","title":"Encounter Id","description":"Associated encounter ID"},"concept_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Concept Id","description":"Concept identifier"},"variable_name":{"type":"string","title":"Variable Name","description":"Variable name"},"value_numeric":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Value Numeric","description":"Numeric value"},"value_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Value Text","description":"Text value"},"value_coded":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Value Coded","description":"Coded value"},"obs_datetime":{"type":"string","format":"date-time","title":"Obs Datetime","description":"Observation date and time"}},"type":"object","required":["patient_uuid","encounter_id","variable_name","obs_datetime"],"title":"ObservationCreate","description":"Observation creation schema"},"ObservationListResponse":{"properties":{"observations":{"items":{"$ref":"#/components/schemas/ObservationResponse"},"type":"array","title":"Observations"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["observations","total","page","page_size","total_pages"],"title":"ObservationListResponse","description":"Observation list response with pagination"},"ObservationResponse":{"properties":{"id":{"type":"integer","title":"Id"},"obs_uuid":{"type":"string","title":"Obs Uuid"},"patient_uuid":{"type":"string","title":"Patient Uuid"},"encounter_id":{"type":"integer","title":"Encounter Id"},"concept_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Concept Id"},"variable_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Variable Name"},"value_numeric":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Value Numeric"},"value_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Value Text"},"value_coded":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Value Coded"},"obs_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Obs Datetime"},"voided":{"type":"boolean","title":"Voided"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","obs_uuid","patient_uuid","encounter_id","concept_id","variable_name","value_numeric","value_text","value_coded","obs_datetime","voided","created_at"],"title":"ObservationResponse","description":"Observation response schema"},"ObservationUpdate":{"properties":{"concept_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Concept Id"},"variable_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Variable Name"},"value_numeric":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Value Numeric"},"value_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Value Text"},"value_coded":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Value Coded"},"obs_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Obs Datetime"},"voided":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Voided"}},"type":"object","title":"ObservationUpdate","description":"Observation update schema"},"PatientCreate":{"properties":{"patient_uuid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Patient Uuid","description":"Optional UUID, auto-generated if not provided"},"datim_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Datim Id","description":"DATIM facility identifier"},"pepfar_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pepfar Id","description":"PEPFAR patient identifier"},"given_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Given Name","description":"Patient's given name"},"family_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Family Name","description":"Patient's family name"},"birthdate":{"type":"string","format":"date-time","title":"Birthdate","description":"Patient's birth date"},"gender":{"type":"string","title":"Gender","description":"Patient gender (M, F, MALE, FEMALE)"},"state_province":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State Province","description":"State or province"},"city_village":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City Village","description":"City or village"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number","description":"Phone number (must start with +)"}},"type":"object","required":["birthdate","gender"],"title":"PatientCreate","description":"Patient creation schema"},"PatientImportRequest":{"properties":{"patients":{"items":{"$ref":"#/components/schemas/PatientCreate"},"type":"array","maxItems":1000,"title":"Patients"},"deduplicate":{"type":"boolean","title":"Deduplicate","description":"Whether to check for duplicates","default":true},"validate_data":{"type":"boolean","title":"Validate Data","description":"Whether to validate data quality","default":true}},"type":"object","required":["patients"],"title":"PatientImportRequest","description":"Patient import request schema"},"PatientImportResponse":{"properties":{"imported_count":{"type":"integer","title":"Imported Count"},"duplicate_count":{"type":"integer","title":"Duplicate Count"},"error_count":{"type":"integer","title":"Error Count"},"errors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Errors"},"processing_time_seconds":{"type":"number","title":"Processing Time Seconds"}},"type":"object","required":["imported_count","duplicate_count","error_count","errors","processing_time_seconds"],"title":"PatientImportResponse","description":"Patient import response schema"},"PatientListResponse":{"properties":{"patients":{"items":{"$ref":"#/components/schemas/PatientResponse"},"type":"array","title":"Patients"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["patients","total","page","page_size","total_pages"],"title":"PatientListResponse","description":"Patient list response with pagination"},"PatientResponse":{"properties":{"patient_uuid":{"type":"string","title":"Patient Uuid"},"datim_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Datim Id"},"pepfar_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pepfar Id"},"given_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Given Name"},"family_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Family Name"},"birthdate":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birthdate"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"state_province":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State Province"},"city_village":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City Village"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"phone_present":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Phone Present"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["patient_uuid","datim_id","pepfar_id","given_name","family_name","birthdate","gender","state_province","city_village","phone_number","phone_present","created_at","updated_at"],"title":"PatientResponse","description":"Patient response schema"},"PatientStatsResponse":{"properties":{"total_patients":{"type":"integer","title":"Total Patients"},"gender_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Gender Distribution"},"state_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"State Distribution"},"phone_coverage":{"type":"number","title":"Phone Coverage"},"average_age":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Age"},"age_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Age Distribution"}},"type":"object","required":["total_patients","gender_distribution","state_distribution","phone_coverage","average_age","age_distribution"],"title":"PatientStatsResponse","description":"Patient statistics response schema"},"PatientUpdate":{"properties":{"datim_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Datim Id"},"pepfar_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pepfar Id"},"given_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Given Name"},"family_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Family Name"},"birthdate":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birthdate"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"state_province":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State Province"},"city_village":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City Village"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"}},"type":"object","title":"PatientUpdate","description":"Patient update schema"},"PatientValidationRequest":{"properties":{"patient":{"$ref":"#/components/schemas/PatientCreate"},"strict":{"type":"boolean","title":"Strict","description":"Whether to use strict validation rules","default":true}},"type":"object","required":["patient"],"title":"PatientValidationRequest","description":"Patient data validation request schema"},"PatientValidationResponse":{"properties":{"is_valid":{"type":"boolean","title":"Is Valid"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions"}},"type":"object","required":["is_valid","errors","warnings","suggestions"],"title":"PatientValidationResponse","description":"Patient data validation response schema"},"PredictionAnalyticsResponse":{"properties":{"total_predictions":{"type":"integer","title":"Total Predictions"},"risk_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Risk Distribution"},"trend_data":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Trend Data"},"average_confidence":{"type":"number","title":"Average Confidence"},"period_days":{"type":"integer","title":"Period Days"}},"type":"object","required":["total_predictions","risk_distribution","trend_data","average_confidence","period_days"],"title":"PredictionAnalyticsResponse","description":"Response model for prediction analytics"},"PredictionCreate":{"properties":{"patient_uuid":{"type":"string","title":"Patient Uuid"},"features":{"additionalProperties":true,"type":"object","title":"Features","description":"Feature values for prediction"}},"type":"object","required":["patient_uuid","features"],"title":"PredictionCreate","description":"Request model for creating a new IIT prediction","example":{"features":{"age":35,"cd4_count":380,"days_since_last_refill":45,"last_days_supply":30,"visit_count_last_90d":2},"patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890"}},"PredictionExplanationRequest":{"properties":{"prediction_id":{"type":"string","title":"Prediction Id"}},"type":"object","required":["prediction_id"],"title":"PredictionExplanationRequest","description":"Request model for prediction explanation"},"PredictionExplanationResponse":{"properties":{"prediction_id":{"type":"string","title":"Prediction Id"},"patient_uuid":{"type":"string","title":"Patient Uuid"},"risk_score":{"type":"number","title":"Risk Score"},"risk_level":{"type":"string","title":"Risk Level"},"model_version":{"type":"string","title":"Model Version"},"feature_contributions":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Feature Contributions"},"top_positive_factors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Positive Factors"},"top_negative_factors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Negative Factors"},"explanation_summary":{"type":"string","title":"Explanation Summary"},"confidence_score":{"type":"number","title":"Confidence Score"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["prediction_id","patient_uuid","risk_score","risk_level","model_version","feature_contributions","top_positive_factors","top_negative_factors","explanation_summary","confidence_score","created_at"],"title":"PredictionExplanationResponse","description":"Response model for prediction explanation"},"PredictionListResponse":{"properties":{"predictions":{"items":{"$ref":"#/components/schemas/PredictionResponse"},"type":"array","title":"Predictions"},"total":{"type":"integer","title":"Total"},"skip":{"type":"integer","title":"Skip"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["predictions","total","skip","limit"],"title":"PredictionListResponse","description":"Response model for prediction list endpoints"},"PredictionResponse":{"properties":{"id":{"type":"integer","title":"Id"},"patient_uuid":{"type":"string","title":"Patient Uuid"},"prediction_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Prediction Score"},"risk_level":{"$ref":"#/components/schemas/RiskLevel"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence"},"features":{"additionalProperties":true,"type":"object","title":"Features"},"model_version":{"type":"string","title":"Model Version"},"prediction_timestamp":{"type":"string","format":"date-time","title":"Prediction Timestamp"}},"type":"object","required":["id","patient_uuid","prediction_score","risk_level","confidence","features","model_version","prediction_timestamp"],"title":"PredictionResponse","description":"Response model for prediction results","example":{"confidence":0.85,"created_at":"2025-01-15T10:30:00","created_by":"clinician-001","features_used":{"age":35,"days_since_last_refill":45,"last_days_supply":30},"id":123,"model_version":"1.2.0","patient_uuid":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","prediction_timestamp":"2025-01-15T10:30:00","risk_level":"high","risk_score":0.68,"updated_at":"2025-01-15T10:30:00"}},"QueueStatsResponse":{"properties":{"name":{"type":"string","title":"Name"},"queued":{"type":"integer","title":"Queued"},"failed":{"type":"integer","title":"Failed"},"started":{"type":"integer","title":"Started"},"finished":{"type":"integer","title":"Finished"},"workers":{"type":"integer","title":"Workers"}},"type":"object","required":["name","queued","failed","started","finished","workers"],"title":"QueueStatsResponse","description":"Queue statistics response"},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest","description":"Refresh token request schema"},"RiskLevel":{"type":"string","enum":["low","medium","high","critical"],"title":"RiskLevel","description":"IIT risk level classification"},"RoleResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions","default":[]}},"type":"object","required":["id","name","description","created_at"],"title":"RoleResponse","description":"Role response schema"},"ScheduleCleanupRequest":{"properties":{"hour":{"type":"integer","maximum":23.0,"minimum":0.0,"title":"Hour","description":"Hour to run (0-23)","default":2},"minute":{"type":"integer","maximum":59.0,"minimum":0.0,"title":"Minute","description":"Minute to run (0-59)","default":0},"days_to_keep":{"type":"integer","minimum":1.0,"title":"Days To Keep","description":"Days of data to keep","default":90}},"type":"object","title":"ScheduleCleanupRequest","description":"Request to schedule daily cleanup"},"ScheduledJobInfo":{"properties":{"id":{"type":"string","title":"Id"},"func_name":{"type":"string","title":"Func Name"},"scheduled_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scheduled Time"},"interval":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Interval"},"timeout":{"type":"integer","title":"Timeout"}},"type":"object","required":["id","func_name","scheduled_time","interval","timeout"],"title":"ScheduledJobInfo","description":"Scheduled job information"},"SecurityAuditLogRequest":{"properties":{"limit":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Limit","description":"Maximum number of logs to return","default":100},"offset":{"type":"integer","minimum":0.0,"title":"Offset","description":"Number of logs to skip","default":0},"event_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Type","description":"Filter by event type"},"severity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity","description":"Filter by severity"},"start_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date","description":"Filter logs after this date"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date","description":"Filter logs before this date"}},"type":"object","title":"SecurityAuditLogRequest","description":"Request model for audit log query"},"SecurityConfigRequest":{"properties":{"rate_limit_enabled":{"type":"boolean","title":"Rate Limit Enabled","default":true},"rate_limit_requests_per_minute":{"type":"integer","title":"Rate Limit Requests Per Minute","default":100},"rate_limit_window_seconds":{"type":"integer","title":"Rate Limit Window Seconds","default":60}},"type":"object","title":"SecurityConfigRequest","description":"Request model for security configuration"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"},"user":{"$ref":"#/components/schemas/UserResponse"}},"type":"object","required":["access_token","refresh_token","expires_in","user"],"title":"TokenResponse","description":"Token response schema"},"UserCreate":{"properties":{"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","description":"Unique username"},"email":{"type":"string","format":"email","title":"Email","description":"Valid email address"},"password":{"type":"string","minLength":8,"title":"Password","description":"Strong password"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name","description":"Optional full name"}},"type":"object","required":["username","email","password"],"title":"UserCreate","description":"User registration schema"},"UserResponse":{"properties":{"id":{"type":"integer","title":"Id"},"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"is_active":{"type":"boolean","title":"Is Active"},"is_superuser":{"type":"boolean","title":"Is Superuser"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"roles":{"items":{"type":"string"},"type":"array","title":"Roles","default":[]}},"type":"object","required":["id","username","email","full_name","is_active","is_superuser","created_at","updated_at"],"title":"UserResponse","description":"User response schema"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VisitCreate":{"properties":{"visit_uuid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Visit Uuid","description":"Optional UUID, auto-generated if not provided"},"patient_uuid":{"type":"string","title":"Patient Uuid","description":"Patient UUID"},"visit_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Visit Type","description":"Type of visit"},"date_started":{"type":"string","format":"date-time","title":"Date Started","description":"Visit start date and time"},"date_stopped":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date Stopped","description":"Visit end date and time"},"location_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Id","description":"Location/facility identifier"}},"type":"object","required":["patient_uuid","date_started"],"title":"VisitCreate","description":"Visit creation schema"},"VisitListResponse":{"properties":{"visits":{"items":{"$ref":"#/components/schemas/VisitResponse"},"type":"array","title":"Visits"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["visits","total","page","page_size","total_pages"],"title":"VisitListResponse","description":"Visit list response with pagination"},"VisitResponse":{"properties":{"id":{"type":"integer","title":"Id"},"visit_uuid":{"type":"string","title":"Visit Uuid"},"patient_uuid":{"type":"string","title":"Patient Uuid"},"visit_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Visit Type"},"date_started":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date Started"},"date_stopped":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date Stopped"},"location_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Id"},"voided":{"type":"boolean","title":"Voided"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","visit_uuid","patient_uuid","visit_type","date_started","date_stopped","location_id","voided","created_at"],"title":"VisitResponse","description":"Visit response schema"},"VisitUpdate":{"properties":{"visit_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Visit Type"},"date_started":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date Started"},"date_stopped":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date Stopped"},"location_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Id"},"voided":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Voided"}},"type":"object","title":"VisitUpdate","description":"Visit update schema"},"VotingStrategyEnum":{"type":"string","enum":["majority","soft","weighted"],"title":"VotingStrategyEnum"},"WorkerInfo":{"properties":{"name":{"type":"string","title":"Name"},"state":{"type":"string","title":"State"},"current_job":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Job"},"queues":{"items":{"type":"string"},"type":"array","title":"Queues"}},"type":"object","required":["name","state","current_job","queues"],"title":"WorkerInfo","description":"Worker information"},"app__schema__ErrorResponse":{"properties":{"error":{"type":"string","title":"Error"},"detail":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detail"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"}},"type":"object","required":["error","timestamp"],"title":"ErrorResponse","description":"Standard error response"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"api/v1/auth/login"}}}}}}