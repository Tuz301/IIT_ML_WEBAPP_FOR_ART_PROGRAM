# IIT ML Service - Environment Configuration Example
# Copy this file to .env and update with your values

# =============================================================================
# API Configuration
# =============================================================================
API_TITLE=IIT Prediction ML Service
API_VERSION=1.0.0
DEBUG=false

# =============================================================================
# HTTPS/SSL Configuration
# =============================================================================
# Enable HTTPS redirect (set to true in production)
FORCE_HTTPS=false
# HTTPS port (default: 443)
HTTPS_PORT=443
# Strict mode: reject HTTP with 400 instead of redirect (not recommended)
HTTPS_STRICT=false
# SSL certificate paths (for production, use Let's Encrypt or similar)
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem

# =============================================================================
# Database Configuration
# =============================================================================
# Use PostgreSQL for production, SQLite for development
USE_POSTGRES=false
DATABASE_PATH=./iit_ml_service.db

# PostgreSQL settings (for production)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=iit_ml_service
POSTGRES_USER=ml_service
POSTGRES_PASSWORD=changeme
# Additional databases
IIT_DB_NAME=iit_db
IIT_DB_USER=iit_user
IIT_DB_PASSWORD=strong_password_here
MEDICAL_DB_NAME=medical_records

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
FEATURE_STORE_TTL=86400

# =============================================================================
# Security Configuration
# =============================================================================
# JWT Settings
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Cookie Settings
COOKIE_SECURE=false  # Set to true when using HTTPS
COOKIE_SAMESITE=lax
COOKIE_DOMAIN=

# CORS Settings (comma-separated list of allowed origins)
# For production with HTTPS:
# CORS_ORIGINS=["https://yourdomain.com","https://www.yourdomain.com"]
# For development:
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173","http://127.0.0.1:3000","http://127.0.0.1:5173"]
FRONTEND_URL=http://localhost:3000

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_PER_USER=true

# =============================================================================
# Model Configuration
# =============================================================================
MODEL_PATH=./models/iit_lightgbm_model.txt
PREPROCESSING_PATH=./models/preprocessing_meta.joblib
MODEL_MANIFEST_PATH=./models/model_manifest.json

# =============================================================================
# Performance Configuration
# =============================================================================
MAX_BATCH_SIZE=100
PREDICTION_TIMEOUT=30.0

# =============================================================================
# Caching Configuration
# =============================================================================
CACHE_ENABLED=true
CACHE_TTL=300
CACHE_MAX_SIZE=1000

# =============================================================================
# Monitoring Configuration
# =============================================================================
LOG_LEVEL=INFO
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# Queue Configuration (RQ)
# =============================================================================
REDIS_QUEUE_ENABLED=true
QUEUE_NAME=ihvn_ml_tasks
DEFAULT_JOB_TIMEOUT=600

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_DIR=./backups

# =============================================================================
# IIT Prediction Configuration
# =============================================================================
IIT_GRACE_PERIOD=28
PREDICTION_WINDOW=90
DEFAULT_THRESHOLD=0.5

# =============================================================================
# Retry Configuration
# =============================================================================
RETRY_MAX_ATTEMPTS=3
RETRY_WAIT_MIN=1.0
RETRY_WAIT_MAX=10.0

# =============================================================================
# External Services (Optional)
# =============================================================================
# Sentry Error Tracking
# SENTRY_DSN=your-sentry-dsn-here

# Notification Settings
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# NOTIFICATION_EMAIL=admin@yourdomain.com
""  
"# ============================================================================="  
"# Alerting Configuration"  
"# ============================================================================="  
"# PagerDuty Integration (get from PagerDuty Events API v2)"  
"PAGERDUTY_ROUTING_KEY="  
"PAGERDUTY_API_URL=https://events.pagerduty.com/v2/enqueue"  
""  
"# Slack Integration (create webhook in Slack app settings)"  
"SLACK_WEBHOOK_URL="  
"SLACK_DEFAULT_CHANNEL=#alerts"  
""  
"# Alerting Settings"  
"ALERTING_ENABLED=true"  
"ALERT_RATE_LIMIT_CRITICAL=0"  
"ALERT_RATE_LIMIT_ERROR=300"  
"ALERT_RATE_LIMIT_WARNING=900"  
"ALERT_RATE_LIMIT_INFO=3600" 
