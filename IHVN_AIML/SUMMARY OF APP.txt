# IIT ML Service - Complete Architecture Overview

## ğŸ¯ **Application Purpose**
The **IIT (Intermittent Preventive Treatment) ML Service** is a comprehensive healthcare analytics platform designed to predict patient risk for treatment interruption in malaria-endemic regions. It leverages machine learning to provide real-time risk assessments and supports clinical decision-making.

---

## ğŸ—ï¸ **High-Level Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Browser    â”‚  â”‚  Mobile Web  â”‚  â”‚    PWA       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND LAYER (React)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  React 18.3 + TypeScript 5.8 + Vite 7.1                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Contexts   â”‚ â”‚  Pages      â”‚ â”‚ Components  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - Auth     â”‚ â”‚  - Login    â”‚ â”‚  - Forms    â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - API      â”‚ â”‚  - Dashboardâ”‚ â”‚  - Charts   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - Theme    â”‚ â”‚  - Patients â”‚ â”‚  - Tables   â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API GATEWAY LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FastAPI 0.104+ + Middleware Stack                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Middleware Chain:                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  1. CORS (first)                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  2. Security Monitoring                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  3. Error Handling                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  4. Security Headers                                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVICE LAYER                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ML Service â”‚ â”‚  ETL Pipe   â”‚ â”‚  Analytics  â”‚ â”‚  Backup   â”‚  â”‚
â”‚  â”‚  - Model    â”‚ â”‚  - Ingest   â”‚ â”‚  - Reports  â”‚ â”‚  - Restoreâ”‚  â”‚
â”‚  â”‚  - Predict  â”‚ â”‚  - Process  â”‚ â”‚  - Trends   â”‚ â”‚  - Scheduleâ”‚  â”‚
â”‚  â”‚  - Explain  â”‚ â”‚  - Validate â”‚ â”‚  - Cohorts  â”‚ â”‚           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA LAYER                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL 16 (Primary)    Redis 7 (Cache/Feature Store) â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚ Patients    â”‚             â”‚ Features    â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ Predictions â”‚             â”‚ Sessions    â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ Observationsâ”‚             â”‚ Rate Limit  â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ Visits      â”‚             â”‚ Query Cache â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ Audit Logs  â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 INFRASTRUCTURE LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Docker     â”‚ â”‚  Prometheus â”‚ â”‚  Grafana    â”‚ â”‚  pgAdmin  â”‚  â”‚
â”‚  â”‚  Compose    â”‚ â”‚  Metrics    â”‚ â”‚  Dashboards â”‚ â”‚  DB Mgmt  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ **Technology Stack**

### **Frontend Stack**
| Component | Technology | Version | Purpose |
|-----------|-----------|---------|---------|
| **Framework** | React | 18.3.1 | UI component library |
| **Language** | TypeScript | 5.8.3 | Type-safe development |
| **Build Tool** | Vite | 7.1.12 | Fast development server |
| **Routing** | React Router | 6.30.1 | Client-side routing |
| **State** | Context API | - | Global state management |
| **Styling** | Tailwind CSS | 3.4.17 | Utility-first CSS |
| **Animations** | Framer Motion | 11.18.2 | Declarative animations |
| **Charts** | Recharts | 3.5.1 | Data visualization |
| **Forms** | Zod | 3.25.76 | Schema validation |
| **Notifications** | React Toastify | 11.0.5 | Toast notifications |
| **Icons** | Lucide React | 0.533.0 | Icon library |
| **Testing** | Jest + Testing Library | - | Unit testing |
| **E2E Testing** | Cypress | 15.8.1 | End-to-end testing |

### **Backend Stack**
| Component | Technology | Version | Purpose |
|-----------|-----------|---------|---------|
| **API Framework** | FastAPI | 0.104+ | RESTful API |
| **Database** | PostgreSQL | 16 | Primary data storage |
| **Cache** | Redis | 7.0 | Feature store & caching |
| **ORM** | SQLAlchemy | 2.0+ | Database ORM |
| **ML Framework** | scikit-learn | 1.3+ | Machine learning |
| **Validation** | Pydantic | 2.0+ | Data validation |
| **Authentication** | JWT | - | Token-based auth |
| **Async** | asyncio | - | Async processing |
| **Testing** | pytest | - | Backend testing |

### **Infrastructure Stack**
| Component | Technology | Purpose |
|-----------|-----------|---------|
| **Containerization** | Docker 24+ | Application containers |
| **Orchestration** | Docker Compose | Local development |
| **Monitoring** | Prometheus 2.45+ | Metrics collection |
| **Visualization** | Grafana 10.1+ | Dashboard & alerting |
| **Database Admin** | pgAdmin 4 | PostgreSQL management |

---

## ğŸ—‚ï¸ **Project Structure**

```
my_app/
â”œâ”€â”€ backend/ml-service/              # Backend API Service
â”‚   â”œâ”€â”€ app/                         # FastAPI application
â”‚   â”‚   â”œâ”€â”€ api/                     # API route handlers (14 modules)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py             # Authentication endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ patients.py         # Patient management
â”‚   â”‚   â”‚   â”œâ”€â”€ predictions.py      # ML predictions
â”‚   â”‚   â”‚   â”œâ”€â”€ observations.py     # Clinical observations
â”‚   â”‚   â”‚   â”œâ”€â”€ visits.py           # Patient visits
â”‚   â”‚   â”‚   â”œâ”€â”€ features.py         # Feature engineering
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics.py        # Analytics & reporting
â”‚   â”‚   â”‚   â”œâ”€â”€ explainability.py   # Model explainability
â”‚   â”‚   â”‚   â”œâ”€â”€ ensemble.py         # Ensemble methods
â”‚   â”‚   â”‚   â”œâ”€â”€ backup.py           # Backup & restore
â”‚   â”‚   â”‚   â”œâ”€â”€ etl.py              # ETL pipeline
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.py            # Cache management
â”‚   â”‚   â”‚   â””â”€â”€ security.py         # Security endpoints
â”‚   â”‚   â”œâ”€â”€ middleware/              # Custom middleware
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py         # Security monitoring
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.py       # Request validation
â”‚   â”‚   â”‚   â”œâ”€â”€ error_handling.py   # Error handling
â”‚   â”‚   â”‚   â”œâ”€â”€ caching.py          # Response caching
â”‚   â”‚   â”‚   â””â”€â”€ performance.py      # Performance tracking
â”‚   â”‚   â”œâ”€â”€ utils/                   # Utility functions
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py         # Database utilities
â”‚   â”‚   â”‚   â”œâ”€â”€ backup.py           # Backup utilities
â”‚   â”‚   â”‚   â””â”€â”€ encryption.py       # Encryption utilities
â”‚   â”‚   â”œâ”€â”€ models.py                # SQLAlchemy ORM models
â”‚   â”‚   â”œâ”€â”€ schema.py                # Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ crud.py                  # Database operations
â”‚   â”‚   â”œâ”€â”€ auth.py                  # Authentication logic
â”‚   â”‚   â”œâ”€â”€ config.py                # Configuration management
â”‚   â”‚   â”œâ”€â”€ dependencies.py          # Dependency injection
â”‚   â”‚   â”œâ”€â”€ ml_model.py              # ML model wrapper
â”‚   â”‚   â”œâ”€â”€ feature_store.py         # Feature store management
â”‚   â”‚   â”œâ”€â”€ ensemble_methods.py      # Ensemble algorithms
â”‚   â”‚   â”œâ”€â”€ explainability.py        # Model explainability
â”‚   â”‚   â”œâ”€â”€ monitoring.py            # Application monitoring
â”‚   â”‚   â”œâ”€â”€ health.py                # Health check endpoints
â”‚   â”‚   â””â”€â”€ main.py                  # Application entry point
â”‚   â”œâ”€â”€ etl/                         # ETL Pipeline
â”‚   â”‚   â”œâ”€â”€ data_ingestion.py        # Data ingestion
â”‚   â”‚   â”œâ”€â”€ data_processing.py       # Feature processing
â”‚   â”‚   â”œâ”€â”€ pipeline.py              # ETL orchestration
â”‚   â”‚   â”œâ”€â”€ ingest_runner.py         # Job execution
â”‚   â”‚   â””â”€â”€ utils.py                 # ETL utilities
â”‚   â”œâ”€â”€ models/                      # ML Model Artifacts
â”‚   â”‚   â”œâ”€â”€ iit_lightgbm_model.txt   # Trained model
â”‚   â”‚   â”œâ”€â”€ preprocessing_meta.joblib # Preprocessing metadata
â”‚   â”‚   â””â”€â”€ model_manifest.json      # Model registry
â”‚   â”œâ”€â”€ scripts/                     # Utility scripts
â”‚   â”‚   â”œâ”€â”€ train_model.py           # Model training
â”‚   â”‚   â”œâ”€â”€ backup_scheduler.py      # Scheduled backups
â”‚   â”‚   â””â”€â”€ database_optimization.py # DB optimization
â”‚   â”œâ”€â”€ tests/                       # Test suite
â”‚   â”‚   â”œâ”€â”€ test_api.py              # API tests
â”‚   â”‚   â”œâ”€â”€ test_etl.py              # ETL tests
â”‚   â”‚   â”œâ”€â”€ test_model.py            # Model tests
â”‚   â”‚   â””â”€â”€ test_security.py         # Security tests
â”‚   â”œâ”€â”€ monitoring/                  # Monitoring configs
â”‚   â”‚   â”œâ”€â”€ prometheus.yml           # Prometheus config
â”‚   â”‚   â”œâ”€â”€ grafana-dashboard.json   # Grafana dashboards
â”‚   â”‚   â””â”€â”€ alerts.yml               # Alert rules
â”‚   â”œâ”€â”€ docs/                        # Documentation
â”‚   â”‚   â”œâ”€â”€ system_architecture.md   # Architecture docs
â”‚   â”‚   â”œâ”€â”€ api_documentation.md     # API reference
â”‚   â”‚   â””â”€â”€ testing_guide.md         # Testing guide
â”‚   â””â”€â”€ Dockerfile                   # Backend container
â”œâ”€â”€ src/                             # Frontend React Application
â”‚   â”œâ”€â”€ pages/                       # Page components
â”‚   â”‚   â”œâ”€â”€ Login.tsx                # Login page (futuristic design)
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx            # Main dashboard
â”‚   â”‚   â”œâ”€â”€ PatientList.tsx          # Patient management
â”‚   â”‚   â”œâ”€â”€ PatientForm.tsx          # Patient creation/edit
â”‚   â”‚   â”œâ”€â”€ PatientDetail.tsx        # Patient details
â”‚   â”‚   â”œâ”€â”€ PredictionForm.tsx       # Prediction creation
â”‚   â”‚   â”œâ”€â”€ ModelMetrics.tsx         # Model performance
â”‚   â”‚   â”œâ”€â”€ Reports.tsx              # Reports & analytics
â”‚   â”‚   â”œâ”€â”€ FieldOperations.tsx      # Mobile field ops
â”‚   â”‚   â””â”€â”€ Profile.tsx              # User profile
â”‚   â”œâ”€â”€ components/                  # Reusable components
â”‚   â”‚   â”œâ”€â”€ Navigation.tsx           # App navigation
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx          # Dark/light mode
â”‚   â”‚   â”œâ”€â”€ StatCard.tsx             # Dashboard stat cards
â”‚   â”‚   â”œâ”€â”€ RiskChart.tsx            # Risk visualization
â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.tsx       # Auth wrapper
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx        # Error handling
â”‚   â”‚   â”œâ”€â”€ BarcodeScanner.tsx       # QR/barcode scanner
â”‚   â”‚   â”œâ”€â”€ LocationTracker.tsx      # GPS tracking
â”‚   â”‚   â”œâ”€â”€ PhotoCapture.tsx         # Camera capture
â”‚   â”‚   â”œâ”€â”€ VoiceNote.tsx            # Voice recording
â”‚   â”‚   â””â”€â”€ ReportGenerator.tsx      # Report generation
â”‚   â”œâ”€â”€ contexts/                    # React Context
â”‚   â”‚   â”œâ”€â”€ AuthContext.tsx          # Authentication state
â”‚   â”‚   â”œâ”€â”€ ApiContext.tsx           # API client state
â”‚   â”‚   â””â”€â”€ ThemeContext.tsx         # Theme state
â”‚   â”œâ”€â”€ services/                    # API Services
â”‚   â”‚   â””â”€â”€ api.ts                   # API client (100+ endpoints)
â”‚   â”œâ”€â”€ hooks/                       # Custom Hooks
â”‚   â”‚   â”œâ”€â”€ usePrediction.ts         # Prediction hook
â”‚   â”‚   â””â”€â”€ useCleanup.ts            # Cleanup hook
â”‚   â”œâ”€â”€ schemas/                     # Validation Schemas
â”‚   â”‚   â””â”€â”€ validation.ts            # Zod schemas
â”‚   â”œâ”€â”€ i18n/                        # Internationalization
â”‚   â”‚   â””â”€â”€ en.json                  # English translations
â”‚   â”œâ”€â”€ __tests__/                   # Frontend tests
â”‚   â”‚   â”œâ”€â”€ components/              # Component tests
â”‚   â”‚   â”œâ”€â”€ services/                # Service tests
â”‚   â”‚   â””â”€â”€ integration/             # Integration tests
â”‚   â”œâ”€â”€ App.tsx                      # App root component
â”‚   â”œâ”€â”€ main.tsx                     # App entry point
â”‚   â””â”€â”€ index.css                    # Global styles
â”œâ”€â”€ public/                          # Static assets
â”‚   â”œâ”€â”€ manifest.json                # PWA manifest
â”‚   â”œâ”€â”€ sw.js                        # Service worker
â”‚   â””â”€â”€ icon-192x192.png             # App icon
â”œâ”€â”€ cypress/                         # E2E Tests
â”‚   â”œâ”€â”€ e2e/                         # Test scenarios
â”‚   â”‚   â”œâ”€â”€ patient-management.cy.ts # Patient workflow
â”‚   â”‚   â””â”€â”€ prediction-workflow.cy.ts # Prediction workflow
â”‚   â””â”€â”€ support/                     # Test utilities
â”œâ”€â”€ docker-compose.yml               # Container orchestration
â”œâ”€â”€ Dockerfile                       # Frontend container
â”œâ”€â”€ package.json                     # Frontend dependencies
â”œâ”€â”€ tailwind.config.js               # Tailwind configuration
â”œâ”€â”€ vite.config.ts                   # Vite configuration
â””â”€â”€ .env                             # Environment variables
```

---

## ğŸ”Œ **API Architecture (14 Modules, 100+ Endpoints)**

### **1. Authentication Module** (`/v1/auth`)
- User registration, login, logout
- JWT token management
- Role-based access control (RBAC)
- Default admin setup

### **2. Patient Management** (`/v1/patients`)
- CRUD operations for patients
- Advanced search and filtering
- Bulk import/export
- Patient statistics

### **3. Predictions Module** (`/v1/predictions`)
- Single patient predictions
- Batch predictions
- Prediction analytics
- Risk level calculations

### **4. Observations Module** (`/v1/observations`)
- Clinical observations (vitals, labs)
- Bulk observation creation
- Patient/encounter filtering

### **5. Visits Module** (`/v1/visits`)
- Patient visit tracking
- Visit history management

### **6. Features Module** (`/v1/features`)
- Feature engineering
- Feature computation
- Feature caching

### **7. Analytics Module** (`/v1/analytics`)
- Risk distribution analysis
- Trend analysis
- Cohort analysis
- Model performance metrics

### **8. Explainability Module** (`/v1/explainability`)
- Feature importance
- Prediction explanations (SHAP/LIME)
- Model interpretability reports
- Bias analysis

### **9. Ensemble Methods** (`/v1/ensemble`)
- Ensemble creation
- Ensemble predictions
- Performance comparison

### **10. Backup Module** (`/v1/backup`)
- Database backup/restore
- Model backup
- Backup scheduling
- Integrity verification

### **11. ETL Pipeline** (`/v1/etl`)
- Full pipeline execution
- Data ingestion
- Feature processing
- Job scheduling

### **12. Cache Module** (`/v1/cache`)
- Cache statistics
- Cache invalidation
- Cache warmup
- Configuration management

### **13. Security Module** (`/v1/security`)
- Audit logs
- Security configuration
- Threat monitoring

### **14. Health Check** (`/health`)
- Basic health check
- Detailed health status
- Readiness/liveness probes
- Application metrics

---

## ğŸ”„ **Data Flow Architecture**

### **Patient Registration Flow**
```
Frontend Form â†’ API Validation â†’ PostgreSQL Storage â†’ Audit Log â†’ Index Update
```

### **Risk Prediction Flow**
```
Patient Data â†’ Feature Engineering â†’ ML Model Inference â†’ Risk Score â†’ Explanation â†’ Storage â†’ Notification
```

### **Analytics Flow**
```
Query Request â†’ Database Query â†’ Aggregation â†’ Computation â†’ Caching â†’ Visualization
```

---

## ğŸ” **Security Architecture**

### **Authentication**
- JWT-based token authentication
- Role-based access control (Admin, Clinician, Analyst)
- Multi-factor authentication (optional)

### **API Security**
- CORS configuration (fixed)
- Rate limiting
- Input validation
- Request sanitization

### **Data Security**
- Encryption at rest (PostgreSQL TDE)
- Encryption in transit (TLS 1.3)
- Audit logging for compliance

---

## ğŸ“Š **Monitoring & Observability**

### **Metrics Collection**
- API metrics (latency, error rates)
- Business metrics (prediction accuracy)
- System metrics (CPU, memory)

### **Visualization**
- Grafana dashboards
- Real-time alerts
- Custom reports

---

## ğŸš€ **Deployment Architecture**

### **Development Environment**
- Docker Compose orchestration
- Hot reloading
- Database seeding
- Debug tools

### **Services**
| Service | Port | Purpose |
|---------|------|---------|
| Frontend | 3000 | React application |
| ML API | 8000 | FastAPI backend |
| PostgreSQL | 5432 | Primary database |
| Redis | 6379 | Cache/feature store |
| Prometheus | 9090 | Metrics collection |
| Grafana | 3001 | Dashboards |
| pgAdmin | 8080 | Database management |

---

## âœ… **Current Status**

All critical components are operational:
- âœ… **14 API modules** registered and working
- âœ… **100+ endpoints** accessible
- âœ… **CORS issues** resolved
- âœ… **Authentication** working
- âœ… **Patient management** functional
- âœ… **ML predictions** operational
- âœ… **ETL pipeline** available
- âœ… **Redis caching** active
- âœ… **Monitoring** enabled

---

This is a production-ready, enterprise-grade healthcare ML platform with comprehensive features for patient risk prediction, analytics, and clinical decision support.